{"ast":null,"code":"var _jsxFileName = \"/Users/thitiwutphophan/shop/src/pages/Bag.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useBag } from '../contexts/BagContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport { Package, Gift, Sparkles, ArrowLeft, Users, Calendar } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Bag = () => {\n  _s();\n  var _scrollRef$current, _scrollRef$current2, _scrollRef$current3;\n  const {\n    openPetBox,\n    getUnopenedBoxes,\n    getOpenedBoxes,\n    getAllPets,\n    getRandomPet,\n    addPetToCollection,\n    userBag\n  } = useBag();\n  const {\n    user\n  } = useAuth();\n  const navigate = useNavigate();\n  const [openingBox, setOpeningBox] = useState(null);\n  const [showPetReveal, setShowPetReveal] = useState(false);\n  const [revealedPet, setRevealedPet] = useState(null);\n\n  // CS:GO Style Animation States\n  const [isSpinning, setIsSpinning] = useState(false);\n  const [spinningPets, setSpinningPets] = useState([]);\n  const [currentSpinningIndex, setCurrentSpinningIndex] = useState(0);\n  const [showFinalReveal, setShowFinalReveal] = useState(false);\n  const [scrollProgress, setScrollProgress] = useState(0);\n  const scrollRef = useRef(null);\n  const audioContextRef = useRef(null);\n\n  // Sound effects\n  const playScrollSound = () => {\n    try {\n      if (!audioContextRef.current) {\n        audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();\n      }\n      const oscillator = audioContextRef.current.createOscillator();\n      const gainNode = audioContextRef.current.createGain();\n      oscillator.connect(gainNode);\n      gainNode.connect(audioContextRef.current.destination);\n      oscillator.frequency.setValueAtTime(800, audioContextRef.current.currentTime);\n      oscillator.frequency.exponentialRampToValueAtTime(400, audioContextRef.current.currentTime + 0.1);\n      gainNode.gain.setValueAtTime(0.1, audioContextRef.current.currentTime);\n      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContextRef.current.currentTime + 0.1);\n      oscillator.start(audioContextRef.current.currentTime);\n      oscillator.stop(audioContextRef.current.currentTime + 0.1);\n    } catch (error) {\n      console.log('Audio not supported');\n    }\n  };\n  const playRevealSound = () => {\n    try {\n      if (!audioContextRef.current) {\n        audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();\n      }\n      const oscillator = audioContextRef.current.createOscillator();\n      const gainNode = audioContextRef.current.createGain();\n      oscillator.connect(gainNode);\n      gainNode.connect(audioContextRef.current.destination);\n\n      // Ascending tone for reveal\n      oscillator.frequency.setValueAtTime(200, audioContextRef.current.currentTime);\n      oscillator.frequency.exponentialRampToValueAtTime(800, audioContextRef.current.currentTime + 0.3);\n      gainNode.gain.setValueAtTime(0.2, audioContextRef.current.currentTime);\n      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContextRef.current.currentTime + 0.3);\n      oscillator.start(audioContextRef.current.currentTime);\n      oscillator.stop(audioContextRef.current.currentTime + 0.3);\n    } catch (error) {\n      console.log('Audio not supported');\n    }\n  };\n  const unopenedBoxes = getUnopenedBoxes();\n  const openedBoxes = getOpenedBoxes();\n  const allPets = getAllPets();\n\n  // Debug logging\n  useEffect(() => {\n    console.log('Bag component state:', {\n      isSpinning,\n      spinningPets: spinningPets.length,\n      showFinalReveal,\n      revealedPet: revealedPet === null || revealedPet === void 0 ? void 0 : revealedPet.name,\n      scrollProgress,\n      unopenedBoxes: unopenedBoxes.length,\n      allPets: allPets.length\n    });\n  }, [isSpinning, spinningPets.length, showFinalReveal, revealedPet, scrollProgress, unopenedBoxes.length, allPets.length]);\n\n  // Debug scroll ref\n  useEffect(() => {\n    if (isSpinning && scrollRef.current) {\n      console.log('Scroll ref is now available:', scrollRef.current);\n      console.log('Container dimensions:', {\n        clientWidth: scrollRef.current.clientWidth,\n        scrollWidth: scrollRef.current.scrollWidth,\n        scrollLeft: scrollRef.current.scrollLeft\n      });\n    }\n  }, [isSpinning, spinningPets.length]);\n  const handleOpenBox = async box => {\n    console.log('Opening box:', box.id);\n    if (openingBox) return; // Prevent multiple openings\n\n    // Set animation state immediately\n    setOpeningBox(box.id);\n    setIsSpinning(true);\n    setShowPetReveal(false);\n    setShowFinalReveal(false);\n    setScrollProgress(0);\n    console.log('Animation state set - isSpinning:', true);\n    try {\n      console.log('Starting animation process...');\n      // First, get a random pet for the animation (but don't add to collection yet)\n      const randomPet = getRandomPet();\n      console.log('Random pet selected:', randomPet.name);\n      setRevealedPet(randomPet);\n\n      // Generate random pets for scroll animation (like CS:GO)\n      const randomPets = generateRandomPetsForSpinning();\n      console.log('Generated', randomPets.length, 'pets for animation');\n      setSpinningPets(randomPets);\n\n      // Wait a bit for the state to update and modal to show\n      await new Promise(resolve => setTimeout(resolve, 100));\n\n      // Start scroll animation and wait for it to complete (5 seconds)\n      console.log('Starting scroll animation...');\n      await startScrollAnimation(randomPets.length);\n      console.log('Animation completed!');\n\n      // After animation completes, show the final reveal\n      setIsSpinning(false);\n      setSpinningPets([]);\n      setShowFinalReveal(true);\n\n      // Wait 3 seconds for the reveal animation\n      await new Promise(resolve => setTimeout(resolve, 3000));\n\n      // After reveal animation, add the pet to the collection\n      console.log('Adding pet to collection:', randomPet.name);\n      addPetToCollection(randomPet, box.id);\n\n      // Hide the final reveal and return to bag\n      setShowFinalReveal(false);\n      setRevealedPet(null);\n    } catch (error) {\n      console.error('Error opening box:', error);\n      setIsSpinning(false);\n      setSpinningPets([]);\n      setShowFinalReveal(false);\n      setRevealedPet(null);\n    } finally {\n      setOpeningBox(null);\n    }\n  };\n  const generateRandomPetsForSpinning = () => {\n    // Generate 20 random pets for the spinning animation\n    const pets = [];\n    const allPossiblePets = [{\n      id: '1',\n      name: 'Common Cat',\n      rarity: 'Common',\n      image: '🐱',\n      probability: 0.4,\n      description: 'A friendly common cat'\n    }, {\n      id: '2',\n      name: 'Common Dog',\n      rarity: 'Common',\n      image: '🐕',\n      probability: 0.4,\n      description: 'A loyal common dog'\n    }, {\n      id: '3',\n      name: 'Uncommon Fox',\n      rarity: 'Uncommon',\n      image: '🦊',\n      probability: 0.25,\n      description: 'A clever uncommon fox'\n    }, {\n      id: '4',\n      name: 'Uncommon Rabbit',\n      rarity: 'Uncommon',\n      image: '🐰',\n      probability: 0.25,\n      description: 'A quick uncommon rabbit'\n    }, {\n      id: '5',\n      name: 'Rare Dragon',\n      rarity: 'Rare',\n      image: '🐉',\n      probability: 0.2,\n      description: 'A powerful rare dragon'\n    }, {\n      id: '6',\n      name: 'Rare Phoenix',\n      rarity: 'Rare',\n      image: '🦅',\n      probability: 0.2,\n      description: 'A majestic rare phoenix'\n    }, {\n      id: '7',\n      name: 'Legendary Leviathan',\n      rarity: 'Legendary',\n      image: '🐋',\n      probability: 0.1,\n      description: 'A massive legendary leviathan'\n    }, {\n      id: '8',\n      name: 'Mythical Celestial',\n      rarity: 'Mythical',\n      image: '⭐',\n      probability: 0.03,\n      description: 'A divine mythical celestial being'\n    }, {\n      id: '9',\n      name: 'Divine Guardian',\n      rarity: 'Divine',\n      image: '👼',\n      probability: 0.015,\n      description: 'A sacred divine guardian'\n    }, {\n      id: '10',\n      name: 'Prismatic Crystal',\n      rarity: 'Prismatic',\n      image: '💎',\n      probability: 0.005,\n      description: 'A rare prismatic crystal entity'\n    }];\n    for (let i = 0; i < 20; i++) {\n      const randomPet = allPossiblePets[Math.floor(Math.random() * allPossiblePets.length)];\n      pets.push({\n        ...randomPet,\n        id: `${randomPet.id}_${i}`,\n        rarity: normalizeRarity(randomPet.rarity)\n      });\n    }\n    return pets;\n  };\n\n  // Horizontal scroll animation for CS:GO style\n  const startScrollAnimation = async numPets => {\n    console.log('startScrollAnimation called with', numPets, 'pets');\n    return new Promise(resolve => {\n      const container = scrollRef.current;\n      if (!container) {\n        console.log('No container found, resolving immediately');\n        return resolve();\n      }\n      console.log('Container found, waiting for render...');\n\n      // Wait for the container to be properly rendered\n      setTimeout(() => {\n        // Calculate scroll parameters\n        const itemWidth = 120; // width of each pet card including margin\n        const containerWidth = 600; // Fixed container width\n        const totalContentWidth = numPets * itemWidth;\n        const maxScroll = Math.max(0, totalContentWidth - containerWidth);\n        const duration = 5000; // 5 seconds\n        const startTime = Date.now();\n        let lastSoundTime = 0;\n        console.log('Animation parameters:', {\n          itemWidth,\n          containerWidth,\n          totalContentWidth,\n          maxScroll,\n          duration,\n          numPets\n        });\n\n        // Ensure container starts at 0\n        container.scrollLeft = 0;\n        console.log('Container scrollLeft set to 0');\n        function animate() {\n          if (!container) {\n            console.log('Container lost during animation, resolving');\n            return resolve();\n          }\n          const elapsed = Date.now() - startTime;\n          const progress = Math.min(elapsed / duration, 1);\n\n          // Update progress for visual effects\n          setScrollProgress(progress);\n\n          // Ease out: slow down as we approach the end\n          const ease = 1 - Math.pow(1 - progress, 3);\n          const currentScroll = maxScroll * ease;\n          console.log('Animation frame:', {\n            progress: progress.toFixed(3),\n            ease: ease.toFixed(3),\n            currentScroll: Math.round(currentScroll),\n            scrollLeft: Math.round(container.scrollLeft),\n            maxScroll\n          });\n\n          // Actually scroll the container\n          container.scrollLeft = currentScroll;\n\n          // Play scroll sound periodically (every 200ms)\n          if (elapsed - lastSoundTime > 200) {\n            playScrollSound();\n            lastSoundTime = elapsed;\n          }\n          if (progress < 1) {\n            requestAnimationFrame(animate);\n          } else {\n            // Ensure we end exactly at the final position\n            container.scrollLeft = maxScroll;\n            setScrollProgress(1);\n\n            // Play reveal sound when animation completes\n            setTimeout(() => {\n              playRevealSound();\n            }, 100);\n            console.log('Animation resolved - Final scrollLeft:', container.scrollLeft);\n            resolve();\n          }\n        }\n        console.log('Starting animation loop');\n        animate();\n      }, 500); // Increased delay to ensure DOM is ready\n    });\n  };\n  const getRarityColor = rarity => {\n    switch (rarity) {\n      case 'Common':\n        return 'text-gray-600';\n      case 'Uncommon':\n        return 'text-blue-600';\n      case 'Rare':\n        return 'text-purple-600';\n      case 'Legendary':\n        return 'text-yellow-600';\n      case 'Mythical':\n        return 'text-orange-600';\n      case 'Divine':\n        return 'text-pink-600';\n      case 'Prismatic':\n        return 'text-rainbow';\n      default:\n        return 'text-gray-600';\n    }\n  };\n  const getRarityBg = rarity => {\n    switch (rarity) {\n      case 'Common':\n        return 'bg-gray-100';\n      case 'Uncommon':\n        return 'bg-blue-100';\n      case 'Rare':\n        return 'bg-purple-100';\n      case 'Legendary':\n        return 'bg-yellow-100';\n      case 'Mythical':\n        return 'bg-orange-100';\n      case 'Divine':\n        return 'bg-pink-100';\n      case 'Prismatic':\n        return 'bg-gradient-to-r from-red-100 via-yellow-100 to-purple-100';\n      default:\n        return 'bg-gray-100';\n    }\n  };\n  const getRarityGlow = rarity => {\n    switch (rarity) {\n      case 'Common':\n        return 'shadow-gray-400';\n      case 'Uncommon':\n        return 'shadow-blue-400';\n      case 'Rare':\n        return 'shadow-purple-400';\n      case 'Legendary':\n        return 'shadow-yellow-400';\n      case 'Mythical':\n        return 'shadow-orange-400';\n      case 'Divine':\n        return 'shadow-pink-400';\n      case 'Prismatic':\n        return 'shadow-rainbow';\n      default:\n        return 'shadow-gray-400';\n    }\n  };\n  const getRarityIcon = rarity => {\n    switch (rarity) {\n      case 'Common':\n        return '⭐';\n      case 'Uncommon':\n        return '🌟';\n      case 'Rare':\n        return '💫';\n      case 'Legendary':\n        return '⚡';\n      case 'Mythical':\n        return '🔥';\n      case 'Divine':\n        return '👑';\n      case 'Prismatic':\n        return '💎';\n      default:\n        return '⭐';\n    }\n  };\n\n  // Helper to normalize rarity to Pet type\n  const normalizeRarity = rarity => {\n    switch (rarity) {\n      case 'Common':\n      case 'Uncommon':\n      case 'Rare':\n      case 'Legendary':\n      case 'Mythical':\n      case 'Divine':\n      case 'Prismatic':\n        return rarity;\n      default:\n        return 'Unknown';\n    }\n  };\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-50 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-6xl mb-4\",\n          children: \"\\uD83D\\uDD12\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-gray-900 mb-4\",\n          children: \"Login Required\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 mb-6\",\n          children: \"Please login to view your bag\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/login'),\n          className: \"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors\",\n          children: \"Login Now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white shadow-sm border-b\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-3xl font-bold text-gray-900 mb-2\",\n            children: \"\\uD83C\\uDF92 Your Pet Collection\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mb-4\",\n            children: \"Open your pet boxes and collect amazing pets from Grow a Garden!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap justify-center gap-4 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center bg-purple-100 text-purple-700 px-3 py-1 rounded-full\",\n              children: [/*#__PURE__*/_jsxDEV(Sparkles, {\n                size: 14,\n                className: \"mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 17\n              }, this), \"CS:GO Style Opening\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center bg-pink-100 text-pink-700 px-3 py-1 rounded-full\",\n              children: [/*#__PURE__*/_jsxDEV(Gift, {\n                size: 14,\n                className: \"mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 17\n              }, this), \"Random Pet Selection\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center bg-blue-100 text-blue-700 px-3 py-1 rounded-full\",\n              children: [/*#__PURE__*/_jsxDEV(Package, {\n                size: 14,\n                className: \"mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 17\n              }, this), \"Line Notifications\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 7\n    }, this), isSpinning && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative w-full max-w-3xl mx-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gradient-to-r from-gray-900 to-gray-800 rounded-2xl p-8 border-4 border-purple-500 shadow-2xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-3xl font-bold text-white mb-2\",\n              children: \"Opening Pet Box\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-purple-300\",\n              children: \"Scrolling for your pet...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-purple-300 mt-2\",\n              children: [\"Debug: Pets: \", spinningPets.length, \" | Progress: \", Math.round(scrollProgress * 100), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-purple-300 mt-1\",\n              children: [\"Container: \", scrollRef.current ? 'Found' : 'Not Found', \" | ScrollWidth: \", ((_scrollRef$current = scrollRef.current) === null || _scrollRef$current === void 0 ? void 0 : _scrollRef$current.scrollWidth) || 'N/A', \" | ClientWidth: \", ((_scrollRef$current2 = scrollRef.current) === null || _scrollRef$current2 === void 0 ? void 0 : _scrollRef$current2.clientWidth) || 'N/A', \" | ScrollLeft: \", ((_scrollRef$current3 = scrollRef.current) === null || _scrollRef$current3 === void 0 ? void 0 : _scrollRef$current3.scrollLeft) || 'N/A', \" | CanScroll: \", scrollRef.current ? scrollRef.current.scrollWidth > scrollRef.current.clientWidth ? 'Yes' : 'No' : 'N/A']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 w-full bg-gray-700 rounded-full h-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-100 ease-out\",\n                style: {\n                  width: `${scrollProgress * 100}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-purple-300 text-sm mt-2\",\n              children: [Math.round(scrollProgress * 100), \"% Complete\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative h-32 overflow-hidden border-2 border-red-500 bg-gray-800\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              ref: scrollRef,\n              className: \"flex flex-row items-center h-32 overflow-x-scroll scrollbar-hide\",\n              style: {\n                scrollBehavior: 'auto',\n                width: '600px',\n                // Fixed container width\n                maxWidth: '600px'\n              },\n              children: spinningPets.length > 0 ? spinningPets.map((pet, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `flex flex-col items-center justify-center w-24 h-28 rounded-xl bg-white shadow-lg border-2 ${getRarityBg(pet.rarity)} ${getRarityGlow(pet.rarity)} transition-all duration-300 hover:scale-105 flex-shrink-0`,\n                style: {\n                  minWidth: '96px',\n                  marginRight: '24px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-4xl mb-1 animate-pulse\",\n                  children: pet.image || '❓'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 465,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `text-xs font-bold ${getRarityColor(pet.rarity)}`,\n                  children: pet.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 466,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs\",\n                  children: [getRarityIcon(pet.rarity), \" \", pet.rarity]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 467,\n                  columnNumber: 25\n                }, this)]\n              }, pet.id + idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 457,\n                columnNumber: 23\n              }, this)) :\n              /*#__PURE__*/\n              // Fallback if no pets are loaded\n              _jsxDEV(\"div\", {\n                className: \"flex items-center justify-center w-full h-full\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-white text-xl\",\n                  children: \"Loading pets...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 473,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute top-0 left-1/2 transform -translate-x-1/2 w-1 h-full bg-yellow-400 shadow-lg z-10 animate-pulse\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute top-0 left-1/2 transform -translate-x-1/2 w-24 h-full bg-gradient-to-r from-transparent via-yellow-400/20 to-transparent z-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute top-2 left-1/2 transform -translate-x-1/2 text-yellow-400 animate-ping\",\n              children: \"\\u2728\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-yellow-400 animate-ping delay-300\",\n              children: \"\\u2728\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4 text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-2 h-2 bg-purple-400 rounded-full animate-pulse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-2 h-2 bg-pink-400 rounded-full animate-pulse delay-100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-2 h-2 bg-purple-400 rounded-full animate-pulse delay-200\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 494,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 9\n    }, this), showFinalReveal && revealedPet && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0 bg-gradient-to-r from-purple-600/20 to-pink-600/20 animate-pulse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `relative bg-gradient-to-br from-gray-900 to-gray-800 rounded-3xl p-12 max-w-lg mx-4 border-4 ${getRarityGlow(revealedPet.rarity)} shadow-2xl animate-bounce`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `absolute inset-0 rounded-3xl ${getRarityGlow(revealedPet.rarity)} opacity-50 blur-xl`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative z-10 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative mb-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-8xl mb-4 animate-pulse\",\n                children: revealedPet.image\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute top-0 left-1/4 text-2xl animate-ping\",\n                children: \"\\u2728\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute top-1/4 right-1/4 text-2xl animate-ping delay-100\",\n                children: \"\\u2728\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 522,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute bottom-1/4 left-1/3 text-2xl animate-ping delay-200\",\n                children: \"\\u2728\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 523,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-4xl font-bold text-white mb-4 bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent\",\n              children: \"\\uD83C\\uDF89 CONGRATULATIONS!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 527,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-2xl text-white mb-4\",\n              children: [\"You got: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `font-bold ${getRarityColor(revealedPet.rarity)}`,\n                children: revealedPet.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 533,\n                columnNumber: 28\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `inline-block px-6 py-3 rounded-full text-lg font-bold ${getRarityBg(revealedPet.rarity)} ${getRarityColor(revealedPet.rarity)} border-2 border-white shadow-lg`,\n              children: [getRarityIcon(revealedPet.rarity), \" \", revealedPet.rarity]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 537,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-300 mt-4 text-sm\",\n              children: revealedPet.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 542,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-purple-300 mt-2 text-xs\",\n              children: [(revealedPet.probability * 100).toFixed(1), \"% chance to obtain\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0 pointer-events-none\",\n          children: [...Array(20)].map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute w-2 h-2 bg-yellow-400 rounded-full animate-ping\",\n            style: {\n              left: `${Math.random() * 100}%`,\n              top: `${Math.random() * 100}%`,\n              animationDelay: `${Math.random() * 2}s`,\n              animationDuration: `${1 + Math.random()}s`\n            }\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 556,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => navigate('/'),\n            className: \"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 580,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Back to Home\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold text-gray-900 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(Package, {\n            size: 32,\n            className: \"mr-3 text-purple-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 585,\n            columnNumber: 13\n          }, this), \"My Bag\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md p-4 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-purple-600\",\n            children: unopenedBoxes.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-gray-600\",\n            children: \"Unopened Boxes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md p-4 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-green-600\",\n            children: openedBoxes.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-gray-600\",\n            children: \"Opened Boxes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 598,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md p-4 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-blue-600\",\n            children: allPets.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-gray-600\",\n            children: \"Total Pets\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 600,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md p-4 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-yellow-600\",\n            children: allPets.filter(pet => ['Rare', 'Legendary', 'Mythical', 'Divine', 'Prismatic'].includes(pet.rarity)).length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 605,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-gray-600\",\n            children: \"Rare Pets\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 591,\n        columnNumber: 9\n      }, this), unopenedBoxes.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-gray-900 mb-6 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(Gift, {\n            size: 28,\n            className: \"mr-3 text-purple-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 616,\n            columnNumber: 15\n          }, this), \"Unopened Pet Boxes\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-sm font-semibold text-yellow-800 mb-2\",\n            children: \"Debug Animation Test\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 622,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2 flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: async () => {\n                console.log('Testing complete animation flow...');\n                setIsSpinning(true);\n                setSpinningPets(generateRandomPetsForSpinning());\n                setScrollProgress(0);\n                setRevealedPet(getRandomPet());\n\n                // Wait for scroll animation\n                await new Promise(resolve => setTimeout(resolve, 100));\n                await startScrollAnimation(20);\n\n                // Show final reveal\n                setIsSpinning(false);\n                setSpinningPets([]);\n                setShowFinalReveal(true);\n\n                // Auto-hide after 3 seconds\n                setTimeout(() => {\n                  setShowFinalReveal(false);\n                  setRevealedPet(null);\n                }, 3000);\n              },\n              className: \"px-3 py-1 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600\",\n              children: \"Test Complete Flow\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 624,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: async () => {\n                console.log('=== TEST SCROLL ONLY CLICKED ===');\n                console.log('Before - isSpinning:', isSpinning, 'pets:', spinningPets.length);\n                setIsSpinning(true);\n                const pets = generateRandomPetsForSpinning();\n                setSpinningPets(pets);\n                setScrollProgress(0);\n                console.log('After setting state - isSpinning should be true, pets should be', pets.length);\n                console.log('Generated pets:', pets.slice(0, 3).map(p => p.name)); // Show first 3 pets\n\n                // Wait for the modal to render\n                await new Promise(resolve => setTimeout(resolve, 100));\n                console.log('After 100ms delay - checking state...');\n                console.log('isSpinning should now be true');\n\n                // Start the scroll animation\n                console.log('Starting scroll animation...');\n                await startScrollAnimation(pets.length);\n\n                // Keep the modal open for a few seconds after animation\n                setTimeout(() => {\n                  console.log('Animation complete, closing modal...');\n                  setIsSpinning(false);\n                  setSpinningPets([]);\n                }, 2000);\n              },\n              className: \"px-3 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600\",\n              children: \"Test Scroll Only\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 651,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                console.log('Stopping all animations...');\n                setIsSpinning(false);\n                setSpinningPets([]);\n                setShowFinalReveal(false);\n                setRevealedPet(null);\n              },\n              className: \"px-3 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600\",\n              children: \"Stop All\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 685,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                const container = scrollRef.current;\n                if (container) {\n                  console.log('Manual scroll test');\n                  console.log('Before scroll - scrollLeft:', container.scrollLeft);\n                  console.log('Container width:', container.clientWidth);\n                  console.log('Scroll width:', container.scrollWidth);\n                  container.scrollLeft = 500;\n                  console.log('After scroll - scrollLeft:', container.scrollLeft);\n                }\n              },\n              className: \"px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600\",\n              children: \"Test Scroll\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 697,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                const container = scrollRef.current;\n                if (container) {\n                  console.log('Testing scroll animation manually...');\n                  let scrollPos = 0;\n                  const interval = setInterval(() => {\n                    scrollPos += 10;\n                    container.scrollLeft = scrollPos;\n                    console.log('Manual scroll position:', scrollPos);\n                    if (scrollPos >= 1000) {\n                      clearInterval(interval);\n                    }\n                  }, 50);\n                }\n              },\n              className: \"px-3 py-1 bg-indigo-500 text-white text-xs rounded hover:bg-indigo-600\",\n              children: \"Manual Scroll Test\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 713,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: async () => {\n                console.log('=== SCROLL CONTAINER DEBUG ===');\n\n                // First check if modal is showing\n                console.log('Modal state - isSpinning:', isSpinning);\n                console.log('Number of pets:', spinningPets.length);\n                if (!isSpinning) {\n                  console.log('Modal is not showing! Click \"Test Scroll Only\" first.');\n                  return;\n                }\n\n                // Wait a bit for the modal to render\n                await new Promise(resolve => setTimeout(resolve, 100));\n                const container = scrollRef.current;\n                if (container) {\n                  console.log('Container element:', container);\n                  console.log('Client width:', container.clientWidth);\n                  console.log('Scroll width:', container.scrollWidth);\n                  console.log('Current scroll left:', container.scrollLeft);\n                  console.log('Can scroll horizontally:', container.scrollWidth > container.clientWidth);\n                  console.log('Expected content width:', spinningPets.length * 120);\n                  console.log('Container style width:', container.style.width);\n                } else {\n                  console.log('No scroll container found! This means the ref is not connected.');\n                  console.log('scrollRef.current:', scrollRef.current);\n                }\n                console.log('==============================');\n              },\n              className: \"px-3 py-1 bg-orange-500 text-white text-xs rounded hover:bg-orange-600\",\n              children: \"Debug Container\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 733,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                console.log('Testing modal visibility...');\n                setShowFinalReveal(true);\n                setRevealedPet(getRandomPet());\n                setTimeout(() => {\n                  setShowFinalReveal(false);\n                  setRevealedPet(null);\n                }, 2000);\n              },\n              className: \"px-3 py-1 bg-purple-500 text-white text-xs rounded hover:bg-purple-600\",\n              children: \"Test Modal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 768,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                console.log('=== SIMPLE MODAL TEST ===');\n                console.log('Setting isSpinning to true...');\n                setIsSpinning(true);\n                setSpinningPets(generateRandomPetsForSpinning());\n                console.log('Modal should now be visible');\n\n                // Auto-close after 3 seconds\n                setTimeout(() => {\n                  console.log('Auto-closing modal...');\n                  setIsSpinning(false);\n                  setSpinningPets([]);\n                }, 3000);\n              },\n              className: \"px-3 py-1 bg-teal-500 text-white text-xs rounded hover:bg-teal-600\",\n              children: \"Simple Modal Test\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 782,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                console.log('=== BUTTON CLICK TEST ===');\n                console.log('Button clicked!');\n                alert('Button click works!');\n              },\n              className: \"px-3 py-1 bg-gray-500 text-white text-xs rounded hover:bg-gray-600\",\n              children: \"Test Button Click\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 801,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                console.log('=== STATE TEST ===');\n                console.log('Current isSpinning:', isSpinning);\n                setIsSpinning(!isSpinning);\n                console.log('Toggled isSpinning to:', !isSpinning);\n              },\n              className: \"px-3 py-1 bg-pink-500 text-white text-xs rounded hover:bg-pink-600\",\n              children: \"Toggle isSpinning\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 811,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs text-yellow-700\",\n              children: [\"isSpinning: \", isSpinning.toString(), \" | Pets: \", spinningPets.length, \" | FinalReveal: \", showFinalReveal.toString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 822,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 623,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\",\n          children: unopenedBoxes.map(box => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-lg shadow-lg p-6 border-2 border-purple-200 hover:border-purple-400 transition-colors\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-4xl mb-4\",\n                children: \"\\uD83C\\uDF81\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 832,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-semibold text-gray-900 mb-2\",\n                children: box.productName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 833,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-600 mb-4\",\n                children: [\"Purchased: \", new Date(box.purchaseDate).toLocaleDateString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 834,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleOpenBox(box),\n                disabled: openingBox === box.id || isSpinning,\n                className: \"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:from-purple-400 disabled:to-pink-400 text-white py-3 rounded-lg font-semibold transition-all transform hover:scale-105 disabled:transform-none\",\n                children: openingBox === box.id || isSpinning ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"animate-spin rounded-full h-5 w-5 border-b-2 border-white mx-auto mb-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 844,\n                    columnNumber: 27\n                  }, this), \"Opening...\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Sparkles, {\n                    size: 20,\n                    className: \"inline mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 849,\n                    columnNumber: 27\n                  }, this), \"Open Box\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 837,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 831,\n              columnNumber: 19\n            }, this)\n          }, box.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 830,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 828,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 614,\n        columnNumber: 11\n      }, this), allPets.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-gray-900 mb-6 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(Users, {\n            size: 28,\n            className: \"mr-3 text-green-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 865,\n            columnNumber: 15\n          }, this), \"Pet Collection (\", allPets.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 864,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\",\n          children: allPets.map((pet, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-lg shadow-md p-4 border-2 hover:shadow-lg transition-shadow\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-3xl mb-2\",\n                children: pet.image\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 872,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: `font-semibold text-sm mb-1 ${getRarityColor(pet.rarity)}`,\n                children: pet.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 873,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `inline-block px-2 py-1 rounded-full text-xs font-medium ${getRarityBg(pet.rarity)} ${getRarityColor(pet.rarity)}`,\n                children: [getRarityIcon(pet.rarity), \" \", pet.rarity]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 876,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 871,\n              columnNumber: 19\n            }, this)\n          }, `${pet.id}-${index}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 870,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 868,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 863,\n        columnNumber: 11\n      }, this), openedBoxes.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-gray-900 mb-6 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(Calendar, {\n            size: 28,\n            className: \"mr-3 text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 890,\n            columnNumber: 15\n          }, this), \"Opened Boxes History\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 889,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\",\n          children: openedBoxes.map(box => {\n            var _box$pet;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white rounded-lg shadow-md p-4 border-2 border-gray-200\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-3xl mb-2\",\n                  children: (_box$pet = box.pet) === null || _box$pet === void 0 ? void 0 : _box$pet.image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 897,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"font-semibold text-gray-900 mb-1\",\n                  children: box.productName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 898,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-600 mb-2\",\n                  children: [\"Opened: \", new Date(box.purchaseDate).toLocaleDateString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 899,\n                  columnNumber: 21\n                }, this), box.pet && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `inline-block px-2 py-1 rounded-full text-xs font-medium ${getRarityBg(box.pet.rarity)} ${getRarityColor(box.pet.rarity)}`,\n                  children: [getRarityIcon(box.pet.rarity), \" \", box.pet.name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 903,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 896,\n                columnNumber: 19\n              }, this)\n            }, box.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 895,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 893,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 888,\n        columnNumber: 11\n      }, this), unopenedBoxes.length === 0 && allPets.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-6xl mb-4\",\n          children: \"\\uD83C\\uDF81\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 917,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-gray-900 mb-4\",\n          children: \"Your bag is empty\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 918,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 mb-6\",\n          children: \"Purchase some pet boxes to start your collection!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 919,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/products'),\n          className: \"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors\",\n          children: \"Browse Pet Boxes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 920,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 916,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 572,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 380,\n    columnNumber: 5\n  }, this);\n};\n_s(Bag, \"fdB5MDuRiWW+dAQgSnWgkcKM4IM=\", false, function () {\n  return [useBag, useAuth, useNavigate];\n});\n_c = Bag;\nexport default Bag;\nvar _c;\n$RefreshReg$(_c, \"Bag\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useBag","useAuth","useNavigate","Package","Gift","Sparkles","ArrowLeft","Users","Calendar","jsxDEV","_jsxDEV","Fragment","_Fragment","Bag","_s","_scrollRef$current","_scrollRef$current2","_scrollRef$current3","openPetBox","getUnopenedBoxes","getOpenedBoxes","getAllPets","getRandomPet","addPetToCollection","userBag","user","navigate","openingBox","setOpeningBox","showPetReveal","setShowPetReveal","revealedPet","setRevealedPet","isSpinning","setIsSpinning","spinningPets","setSpinningPets","currentSpinningIndex","setCurrentSpinningIndex","showFinalReveal","setShowFinalReveal","scrollProgress","setScrollProgress","scrollRef","audioContextRef","playScrollSound","current","window","AudioContext","webkitAudioContext","oscillator","createOscillator","gainNode","createGain","connect","destination","frequency","setValueAtTime","currentTime","exponentialRampToValueAtTime","gain","start","stop","error","console","log","playRevealSound","unopenedBoxes","openedBoxes","allPets","length","name","clientWidth","scrollWidth","scrollLeft","handleOpenBox","box","id","randomPet","randomPets","generateRandomPetsForSpinning","Promise","resolve","setTimeout","startScrollAnimation","pets","allPossiblePets","rarity","image","probability","description","i","Math","floor","random","push","normalizeRarity","numPets","container","itemWidth","containerWidth","totalContentWidth","maxScroll","max","duration","startTime","Date","now","lastSoundTime","animate","elapsed","progress","min","ease","pow","currentScroll","toFixed","round","requestAnimationFrame","getRarityColor","getRarityBg","getRarityGlow","getRarityIcon","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","style","width","ref","scrollBehavior","maxWidth","map","pet","idx","minWidth","marginRight","Array","_","left","top","animationDelay","animationDuration","filter","includes","slice","p","scrollPos","interval","setInterval","clearInterval","alert","toString","productName","purchaseDate","toLocaleDateString","disabled","index","_box$pet","_c","$RefreshReg$"],"sources":["/Users/thitiwutphophan/shop/src/pages/Bag.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useBag } from '../contexts/BagContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport { \n  Package, \n  Gift, \n  Sparkles, \n  ArrowLeft,\n  Users,\n  Calendar\n} from 'lucide-react';\nimport { PetBox, Pet } from '../types';\n\nconst Bag: React.FC = () => {\n  const { openPetBox, getUnopenedBoxes, getOpenedBoxes, getAllPets, getRandomPet, addPetToCollection, userBag } = useBag();\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [openingBox, setOpeningBox] = useState<string | null>(null);\n  const [showPetReveal, setShowPetReveal] = useState(false);\n  const [revealedPet, setRevealedPet] = useState<Pet | null>(null);\n  \n  // CS:GO Style Animation States\n  const [isSpinning, setIsSpinning] = useState(false);\n  const [spinningPets, setSpinningPets] = useState<Pet[]>([]);\n  const [currentSpinningIndex, setCurrentSpinningIndex] = useState(0);\n  const [showFinalReveal, setShowFinalReveal] = useState(false);\n  const [scrollProgress, setScrollProgress] = useState(0);\n\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const audioContextRef = useRef<AudioContext | null>(null);\n\n  // Sound effects\n  const playScrollSound = () => {\n    try {\n      if (!audioContextRef.current) {\n        audioContextRef.current = new (window.AudioContext || (window as any).webkitAudioContext)();\n      }\n      \n      const oscillator = audioContextRef.current.createOscillator();\n      const gainNode = audioContextRef.current.createGain();\n      \n      oscillator.connect(gainNode);\n      gainNode.connect(audioContextRef.current.destination);\n      \n      oscillator.frequency.setValueAtTime(800, audioContextRef.current.currentTime);\n      oscillator.frequency.exponentialRampToValueAtTime(400, audioContextRef.current.currentTime + 0.1);\n      \n      gainNode.gain.setValueAtTime(0.1, audioContextRef.current.currentTime);\n      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContextRef.current.currentTime + 0.1);\n      \n      oscillator.start(audioContextRef.current.currentTime);\n      oscillator.stop(audioContextRef.current.currentTime + 0.1);\n    } catch (error) {\n      console.log('Audio not supported');\n    }\n  };\n\n  const playRevealSound = () => {\n    try {\n      if (!audioContextRef.current) {\n        audioContextRef.current = new (window.AudioContext || (window as any).webkitAudioContext)();\n      }\n      \n      const oscillator = audioContextRef.current.createOscillator();\n      const gainNode = audioContextRef.current.createGain();\n      \n      oscillator.connect(gainNode);\n      gainNode.connect(audioContextRef.current.destination);\n      \n      // Ascending tone for reveal\n      oscillator.frequency.setValueAtTime(200, audioContextRef.current.currentTime);\n      oscillator.frequency.exponentialRampToValueAtTime(800, audioContextRef.current.currentTime + 0.3);\n      \n      gainNode.gain.setValueAtTime(0.2, audioContextRef.current.currentTime);\n      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContextRef.current.currentTime + 0.3);\n      \n      oscillator.start(audioContextRef.current.currentTime);\n      oscillator.stop(audioContextRef.current.currentTime + 0.3);\n    } catch (error) {\n      console.log('Audio not supported');\n    }\n  };\n\n  const unopenedBoxes = getUnopenedBoxes();\n  const openedBoxes = getOpenedBoxes();\n  const allPets = getAllPets();\n\n  // Debug logging\n  useEffect(() => {\n    console.log('Bag component state:', {\n      isSpinning,\n      spinningPets: spinningPets.length,\n      showFinalReveal,\n      revealedPet: revealedPet?.name,\n      scrollProgress,\n      unopenedBoxes: unopenedBoxes.length,\n      allPets: allPets.length\n    });\n  }, [isSpinning, spinningPets.length, showFinalReveal, revealedPet, scrollProgress, unopenedBoxes.length, allPets.length]);\n\n  // Debug scroll ref\n  useEffect(() => {\n    if (isSpinning && scrollRef.current) {\n      console.log('Scroll ref is now available:', scrollRef.current);\n      console.log('Container dimensions:', {\n        clientWidth: scrollRef.current.clientWidth,\n        scrollWidth: scrollRef.current.scrollWidth,\n        scrollLeft: scrollRef.current.scrollLeft\n      });\n    }\n  }, [isSpinning, spinningPets.length]);\n\n  const handleOpenBox = async (box: PetBox) => {\n    console.log('Opening box:', box.id);\n    if (openingBox) return; // Prevent multiple openings\n\n    // Set animation state immediately\n    setOpeningBox(box.id);\n    setIsSpinning(true);\n    setShowPetReveal(false);\n    setShowFinalReveal(false);\n    setScrollProgress(0);\n    \n    console.log('Animation state set - isSpinning:', true);\n    \n    try {\n      console.log('Starting animation process...');\n      // First, get a random pet for the animation (but don't add to collection yet)\n      const randomPet = getRandomPet();\n      console.log('Random pet selected:', randomPet.name);\n      setRevealedPet(randomPet);\n      \n      // Generate random pets for scroll animation (like CS:GO)\n      const randomPets = generateRandomPetsForSpinning();\n      console.log('Generated', randomPets.length, 'pets for animation');\n      setSpinningPets(randomPets);\n      \n      // Wait a bit for the state to update and modal to show\n      await new Promise(resolve => setTimeout(resolve, 100));\n      \n      // Start scroll animation and wait for it to complete (5 seconds)\n      console.log('Starting scroll animation...');\n      await startScrollAnimation(randomPets.length);\n      console.log('Animation completed!');\n      \n      // After animation completes, show the final reveal\n      setIsSpinning(false);\n      setSpinningPets([]);\n      setShowFinalReveal(true);\n      \n      // Wait 3 seconds for the reveal animation\n      await new Promise(resolve => setTimeout(resolve, 3000));\n      \n      // After reveal animation, add the pet to the collection\n      console.log('Adding pet to collection:', randomPet.name);\n      addPetToCollection(randomPet, box.id);\n      \n      // Hide the final reveal and return to bag\n      setShowFinalReveal(false);\n      setRevealedPet(null);\n      \n    } catch (error) {\n      console.error('Error opening box:', error);\n      setIsSpinning(false);\n      setSpinningPets([]);\n      setShowFinalReveal(false);\n      setRevealedPet(null);\n    } finally {\n      setOpeningBox(null);\n    }\n  };\n\n  const generateRandomPetsForSpinning = (): Pet[] => {\n    // Generate 20 random pets for the spinning animation\n    const pets: Pet[] = [];\n    const allPossiblePets = [\n      { id: '1', name: 'Common Cat', rarity: 'Common', image: '🐱', probability: 0.4, description: 'A friendly common cat' },\n      { id: '2', name: 'Common Dog', rarity: 'Common', image: '🐕', probability: 0.4, description: 'A loyal common dog' },\n      { id: '3', name: 'Uncommon Fox', rarity: 'Uncommon', image: '🦊', probability: 0.25, description: 'A clever uncommon fox' },\n      { id: '4', name: 'Uncommon Rabbit', rarity: 'Uncommon', image: '🐰', probability: 0.25, description: 'A quick uncommon rabbit' },\n      { id: '5', name: 'Rare Dragon', rarity: 'Rare', image: '🐉', probability: 0.2, description: 'A powerful rare dragon' },\n      { id: '6', name: 'Rare Phoenix', rarity: 'Rare', image: '🦅', probability: 0.2, description: 'A majestic rare phoenix' },\n      { id: '7', name: 'Legendary Leviathan', rarity: 'Legendary', image: '🐋', probability: 0.1, description: 'A massive legendary leviathan' },\n      { id: '8', name: 'Mythical Celestial', rarity: 'Mythical', image: '⭐', probability: 0.03, description: 'A divine mythical celestial being' },\n      { id: '9', name: 'Divine Guardian', rarity: 'Divine', image: '👼', probability: 0.015, description: 'A sacred divine guardian' },\n      { id: '10', name: 'Prismatic Crystal', rarity: 'Prismatic', image: '💎', probability: 0.005, description: 'A rare prismatic crystal entity' }\n    ];\n\n    for (let i = 0; i < 20; i++) {\n      const randomPet = allPossiblePets[Math.floor(Math.random() * allPossiblePets.length)];\n      pets.push({ \n        ...randomPet, \n        id: `${randomPet.id}_${i}`,\n        rarity: normalizeRarity(randomPet.rarity)\n      });\n    }\n    return pets;\n  };\n\n  // Horizontal scroll animation for CS:GO style\n  const startScrollAnimation = async (numPets: number): Promise<void> => {\n    console.log('startScrollAnimation called with', numPets, 'pets');\n    return new Promise((resolve) => {\n      const container = scrollRef.current;\n      if (!container) {\n        console.log('No container found, resolving immediately');\n        return resolve();\n      }\n      \n      console.log('Container found, waiting for render...');\n      \n      // Wait for the container to be properly rendered\n      setTimeout(() => {\n        // Calculate scroll parameters\n        const itemWidth = 120; // width of each pet card including margin\n        const containerWidth = 600; // Fixed container width\n        const totalContentWidth = numPets * itemWidth;\n        const maxScroll = Math.max(0, totalContentWidth - containerWidth);\n        const duration = 5000; // 5 seconds\n        const startTime = Date.now();\n        let lastSoundTime = 0;\n        \n        console.log('Animation parameters:', { \n          itemWidth, \n          containerWidth, \n          totalContentWidth, \n          maxScroll, \n          duration,\n          numPets \n        });\n        \n        // Ensure container starts at 0\n        container.scrollLeft = 0;\n        console.log('Container scrollLeft set to 0');\n        \n        function animate() {\n          if (!container) {\n            console.log('Container lost during animation, resolving');\n            return resolve();\n          }\n          \n          const elapsed = Date.now() - startTime;\n          const progress = Math.min(elapsed / duration, 1);\n          \n          // Update progress for visual effects\n          setScrollProgress(progress);\n          \n          // Ease out: slow down as we approach the end\n          const ease = 1 - Math.pow(1 - progress, 3);\n          const currentScroll = maxScroll * ease;\n          \n          console.log('Animation frame:', { \n            progress: progress.toFixed(3), \n            ease: ease.toFixed(3), \n            currentScroll: Math.round(currentScroll),\n            scrollLeft: Math.round(container.scrollLeft),\n            maxScroll\n          });\n          \n          // Actually scroll the container\n          container.scrollLeft = currentScroll;\n          \n          // Play scroll sound periodically (every 200ms)\n          if (elapsed - lastSoundTime > 200) {\n            playScrollSound();\n            lastSoundTime = elapsed;\n          }\n          \n          if (progress < 1) {\n            requestAnimationFrame(animate);\n          } else {\n            // Ensure we end exactly at the final position\n            container.scrollLeft = maxScroll;\n            setScrollProgress(1);\n            \n            // Play reveal sound when animation completes\n            setTimeout(() => {\n              playRevealSound();\n            }, 100);\n            \n            console.log('Animation resolved - Final scrollLeft:', container.scrollLeft);\n            resolve();\n          }\n        }\n        \n        console.log('Starting animation loop');\n        animate();\n      }, 500); // Increased delay to ensure DOM is ready\n    });\n  };\n\n  const getRarityColor = (rarity: string) => {\n    switch (rarity) {\n      case 'Common': return 'text-gray-600';\n      case 'Uncommon': return 'text-blue-600';\n      case 'Rare': return 'text-purple-600';\n      case 'Legendary': return 'text-yellow-600';\n      case 'Mythical': return 'text-orange-600';\n      case 'Divine': return 'text-pink-600';\n      case 'Prismatic': return 'text-rainbow';\n      default: return 'text-gray-600';\n    }\n  };\n\n  const getRarityBg = (rarity: string) => {\n    switch (rarity) {\n      case 'Common': return 'bg-gray-100';\n      case 'Uncommon': return 'bg-blue-100';\n      case 'Rare': return 'bg-purple-100';\n      case 'Legendary': return 'bg-yellow-100';\n      case 'Mythical': return 'bg-orange-100';\n      case 'Divine': return 'bg-pink-100';\n      case 'Prismatic': return 'bg-gradient-to-r from-red-100 via-yellow-100 to-purple-100';\n      default: return 'bg-gray-100';\n    }\n  };\n\n  const getRarityGlow = (rarity: string) => {\n    switch (rarity) {\n      case 'Common': return 'shadow-gray-400';\n      case 'Uncommon': return 'shadow-blue-400';\n      case 'Rare': return 'shadow-purple-400';\n      case 'Legendary': return 'shadow-yellow-400';\n      case 'Mythical': return 'shadow-orange-400';\n      case 'Divine': return 'shadow-pink-400';\n      case 'Prismatic': return 'shadow-rainbow';\n      default: return 'shadow-gray-400';\n    }\n  };\n\n  const getRarityIcon = (rarity: string) => {\n    switch (rarity) {\n      case 'Common': return '⭐';\n      case 'Uncommon': return '🌟';\n      case 'Rare': return '💫';\n      case 'Legendary': return '⚡';\n      case 'Mythical': return '🔥';\n      case 'Divine': return '👑';\n      case 'Prismatic': return '💎';\n      default: return '⭐';\n    }\n  };\n\n  // Helper to normalize rarity to Pet type\n  const normalizeRarity = (rarity: string): Pet['rarity'] => {\n    switch (rarity) {\n      case 'Common':\n      case 'Uncommon':\n      case 'Rare':\n      case 'Legendary':\n      case 'Mythical':\n      case 'Divine':\n      case 'Prismatic':\n        return rarity;\n      default:\n        return 'Unknown';\n    }\n  };\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"text-6xl mb-4\">🔒</div>\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">Login Required</h1>\n          <p className=\"text-gray-600 mb-6\">Please login to view your bag</p>\n          <button\n            onClick={() => navigate('/login')}\n            className=\"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors\"\n          >\n            Login Now\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50\">\n      {/* Header with Features */}\n      <div className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"text-center\">\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">🎒 Your Pet Collection</h1>\n            <p className=\"text-gray-600 mb-4\">Open your pet boxes and collect amazing pets from Grow a Garden!</p>\n            \n            {/* Feature Highlights */}\n            <div className=\"flex flex-wrap justify-center gap-4 text-sm\">\n              <div className=\"flex items-center bg-purple-100 text-purple-700 px-3 py-1 rounded-full\">\n                <Sparkles size={14} className=\"mr-1\" />\n                CS:GO Style Opening\n              </div>\n              <div className=\"flex items-center bg-pink-100 text-pink-700 px-3 py-1 rounded-full\">\n                <Gift size={14} className=\"mr-1\" />\n                Random Pet Selection\n              </div>\n              <div className=\"flex items-center bg-blue-100 text-blue-700 px-3 py-1 rounded-full\">\n                <Package size={14} className=\"mr-1\" />\n                Line Notifications\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* CS:GO Style Horizontal Scroll Animation */}\n      {isSpinning && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50\">\n          <div className=\"relative w-full max-w-3xl mx-4\">\n            <div className=\"bg-gradient-to-r from-gray-900 to-gray-800 rounded-2xl p-8 border-4 border-purple-500 shadow-2xl\">\n              <div className=\"text-center mb-6\">\n                <h2 className=\"text-3xl font-bold text-white mb-2\">Opening Pet Box</h2>\n                <p className=\"text-purple-300\">Scrolling for your pet...</p>\n                \n                {/* Debug Info */}\n                <div className=\"text-xs text-purple-300 mt-2\">\n                  Debug: Pets: {spinningPets.length} | Progress: {Math.round(scrollProgress * 100)}%\n                </div>\n                \n                {/* Additional Debug Info */}\n                <div className=\"text-xs text-purple-300 mt-1\">\n                  Container: {scrollRef.current ? 'Found' : 'Not Found'} | \n                  ScrollWidth: {scrollRef.current?.scrollWidth || 'N/A'} | \n                  ClientWidth: {scrollRef.current?.clientWidth || 'N/A'} |\n                  ScrollLeft: {scrollRef.current?.scrollLeft || 'N/A'} |\n                  CanScroll: {scrollRef.current ? (scrollRef.current.scrollWidth > scrollRef.current.clientWidth ? 'Yes' : 'No') : 'N/A'}\n                </div>\n                \n                {/* Progress Bar */}\n                <div className=\"mt-4 w-full bg-gray-700 rounded-full h-2\">\n                  <div \n                    className=\"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-100 ease-out\"\n                    style={{ width: `${scrollProgress * 100}%` }}\n                  ></div>\n                </div>\n                \n                {/* Progress Text */}\n                <p className=\"text-purple-300 text-sm mt-2\">\n                  {Math.round(scrollProgress * 100)}% Complete\n                </p>\n              </div>\n              \n              {/* Horizontal scroll container */}\n              <div className=\"relative h-32 overflow-hidden border-2 border-red-500 bg-gray-800\">\n                <div\n                  ref={scrollRef}\n                  className=\"flex flex-row items-center h-32 overflow-x-scroll scrollbar-hide\"\n                  style={{ \n                    scrollBehavior: 'auto',\n                    width: '600px', // Fixed container width\n                    maxWidth: '600px'\n                  }}\n                >\n                  {spinningPets.length > 0 ? (\n                    spinningPets.map((pet, idx) => (\n                      <div\n                        key={pet.id + idx}\n                        className={`flex flex-col items-center justify-center w-24 h-28 rounded-xl bg-white shadow-lg border-2 ${getRarityBg(pet.rarity)} ${getRarityGlow(pet.rarity)} transition-all duration-300 hover:scale-105 flex-shrink-0`}\n                        style={{ \n                          minWidth: '96px',\n                          marginRight: '24px'\n                        }}\n                      >\n                        <div className=\"text-4xl mb-1 animate-pulse\">{pet.image || '❓'}</div>\n                        <div className={`text-xs font-bold ${getRarityColor(pet.rarity)}`}>{pet.name}</div>\n                        <div className=\"text-xs\">{getRarityIcon(pet.rarity)} {pet.rarity}</div>\n                      </div>\n                    ))\n                  ) : (\n                    // Fallback if no pets are loaded\n                    <div className=\"flex items-center justify-center w-full h-full\">\n                      <div className=\"text-white text-xl\">Loading pets...</div>\n                    </div>\n                  )}\n                </div>\n                \n                {/* Center indicator with enhanced effects */}\n                <div className=\"absolute top-0 left-1/2 transform -translate-x-1/2 w-1 h-full bg-yellow-400 shadow-lg z-10 animate-pulse\"></div>\n                \n                {/* Glow effects around center */}\n                <div className=\"absolute top-0 left-1/2 transform -translate-x-1/2 w-24 h-full bg-gradient-to-r from-transparent via-yellow-400/20 to-transparent z-5\"></div>\n                \n                {/* Sparkle effects */}\n                <div className=\"absolute top-2 left-1/2 transform -translate-x-1/2 text-yellow-400 animate-ping\">✨</div>\n                <div className=\"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-yellow-400 animate-ping delay-300\">✨</div>\n              </div>\n              \n              {/* Enhanced visual feedback */}\n              <div className=\"mt-4 text-center\">\n                <div className=\"flex justify-center space-x-2\">\n                  <div className=\"w-2 h-2 bg-purple-400 rounded-full animate-pulse\"></div>\n                  <div className=\"w-2 h-2 bg-pink-400 rounded-full animate-pulse delay-100\"></div>\n                  <div className=\"w-2 h-2 bg-purple-400 rounded-full animate-pulse delay-200\"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Final Reveal Modal - CS:GO Style */}\n      {showFinalReveal && revealedPet && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50\">\n          <div className=\"relative\">\n            {/* Background effects */}\n            <div className=\"absolute inset-0 bg-gradient-to-r from-purple-600/20 to-pink-600/20 animate-pulse\"></div>\n            \n            {/* Main reveal card */}\n            <div className={`relative bg-gradient-to-br from-gray-900 to-gray-800 rounded-3xl p-12 max-w-lg mx-4 border-4 ${getRarityGlow(revealedPet.rarity)} shadow-2xl animate-bounce`}>\n              {/* Rarity glow effect */}\n              <div className={`absolute inset-0 rounded-3xl ${getRarityGlow(revealedPet.rarity)} opacity-50 blur-xl`}></div>\n              \n              <div className=\"relative z-10 text-center\">\n                {/* Pet image with effects */}\n                <div className=\"relative mb-6\">\n                  <div className=\"text-8xl mb-4 animate-pulse\">\n                    {revealedPet.image}\n                  </div>\n                  {/* Sparkle effects */}\n                  <div className=\"absolute top-0 left-1/4 text-2xl animate-ping\">✨</div>\n                  <div className=\"absolute top-1/4 right-1/4 text-2xl animate-ping delay-100\">✨</div>\n                  <div className=\"absolute bottom-1/4 left-1/3 text-2xl animate-ping delay-200\">✨</div>\n                </div>\n                \n                {/* Congratulations text */}\n                <h2 className=\"text-4xl font-bold text-white mb-4 bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent\">\n                  🎉 CONGRATULATIONS!\n                </h2>\n                \n                {/* Pet name */}\n                <p className=\"text-2xl text-white mb-4\">\n                  You got: <span className={`font-bold ${getRarityColor(revealedPet.rarity)}`}>{revealedPet.name}</span>\n                </p>\n                \n                {/* Rarity badge */}\n                <div className={`inline-block px-6 py-3 rounded-full text-lg font-bold ${getRarityBg(revealedPet.rarity)} ${getRarityColor(revealedPet.rarity)} border-2 border-white shadow-lg`}>\n                  {getRarityIcon(revealedPet.rarity)} {revealedPet.rarity}\n                </div>\n                \n                {/* Description */}\n                <p className=\"text-gray-300 mt-4 text-sm\">\n                  {revealedPet.description}\n                </p>\n                \n                {/* Probability */}\n                <p className=\"text-purple-300 mt-2 text-xs\">\n                  {(revealedPet.probability * 100).toFixed(1)}% chance to obtain\n                </p>\n              </div>\n            </div>\n            \n            {/* Floating particles */}\n            <div className=\"absolute inset-0 pointer-events-none\">\n              {[...Array(20)].map((_, i) => (\n                <div\n                  key={i}\n                  className=\"absolute w-2 h-2 bg-yellow-400 rounded-full animate-ping\"\n                  style={{\n                    left: `${Math.random() * 100}%`,\n                    top: `${Math.random() * 100}%`,\n                    animationDelay: `${Math.random() * 2}s`,\n                    animationDuration: `${1 + Math.random()}s`\n                  }}\n                ></div>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-8\">\n          <div className=\"flex items-center space-x-4\">\n            <button\n              onClick={() => navigate('/')}\n              className=\"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors\"\n            >\n              <ArrowLeft size={20} />\n              <span>Back to Home</span>\n            </button>\n          </div>\n          <h1 className=\"text-3xl font-bold text-gray-900 flex items-center\">\n            <Package size={32} className=\"mr-3 text-purple-600\" />\n            My Bag\n          </h1>\n        </div>\n\n        {/* Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8\">\n          <div className=\"bg-white rounded-lg shadow-md p-4 text-center\">\n            <div className=\"text-2xl font-bold text-purple-600\">{unopenedBoxes.length}</div>\n            <div className=\"text-gray-600\">Unopened Boxes</div>\n          </div>\n          <div className=\"bg-white rounded-lg shadow-md p-4 text-center\">\n            <div className=\"text-2xl font-bold text-green-600\">{openedBoxes.length}</div>\n            <div className=\"text-gray-600\">Opened Boxes</div>\n          </div>\n          <div className=\"bg-white rounded-lg shadow-md p-4 text-center\">\n            <div className=\"text-2xl font-bold text-blue-600\">{allPets.length}</div>\n            <div className=\"text-gray-600\">Total Pets</div>\n          </div>\n          <div className=\"bg-white rounded-lg shadow-md p-4 text-center\">\n            <div className=\"text-2xl font-bold text-yellow-600\">\n              {allPets.filter(pet => ['Rare', 'Legendary', 'Mythical', 'Divine', 'Prismatic'].includes(pet.rarity)).length}\n            </div>\n            <div className=\"text-gray-600\">Rare Pets</div>\n          </div>\n        </div>\n\n        {/* Unopened Boxes */}\n        {unopenedBoxes.length > 0 && (\n          <div className=\"mb-8\">\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-6 flex items-center\">\n              <Gift size={28} className=\"mr-3 text-purple-600\" />\n              Unopened Pet Boxes\n            </h2>\n            \n            {/* Debug Animation Test */}\n            <div className=\"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n              <h3 className=\"text-sm font-semibold text-yellow-800 mb-2\">Debug Animation Test</h3>\n              <div className=\"flex gap-2 flex-wrap\">\n                <button\n                  onClick={async () => {\n                    console.log('Testing complete animation flow...');\n                    setIsSpinning(true);\n                    setSpinningPets(generateRandomPetsForSpinning());\n                    setScrollProgress(0);\n                    setRevealedPet(getRandomPet());\n                    \n                    // Wait for scroll animation\n                    await new Promise(resolve => setTimeout(resolve, 100));\n                    await startScrollAnimation(20);\n                    \n                    // Show final reveal\n                    setIsSpinning(false);\n                    setSpinningPets([]);\n                    setShowFinalReveal(true);\n                    \n                    // Auto-hide after 3 seconds\n                    setTimeout(() => {\n                      setShowFinalReveal(false);\n                      setRevealedPet(null);\n                    }, 3000);\n                  }}\n                  className=\"px-3 py-1 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600\"\n                >\n                  Test Complete Flow\n                </button>\n                <button\n                  onClick={async () => {\n                    console.log('=== TEST SCROLL ONLY CLICKED ===');\n                    console.log('Before - isSpinning:', isSpinning, 'pets:', spinningPets.length);\n                    \n                    setIsSpinning(true);\n                    const pets = generateRandomPetsForSpinning();\n                    setSpinningPets(pets);\n                    setScrollProgress(0);\n                    \n                    console.log('After setting state - isSpinning should be true, pets should be', pets.length);\n                    console.log('Generated pets:', pets.slice(0, 3).map(p => p.name)); // Show first 3 pets\n                    \n                    // Wait for the modal to render\n                    await new Promise(resolve => setTimeout(resolve, 100));\n                    \n                    console.log('After 100ms delay - checking state...');\n                    console.log('isSpinning should now be true');\n                    \n                    // Start the scroll animation\n                    console.log('Starting scroll animation...');\n                    await startScrollAnimation(pets.length);\n                    \n                    // Keep the modal open for a few seconds after animation\n                    setTimeout(() => {\n                      console.log('Animation complete, closing modal...');\n                      setIsSpinning(false);\n                      setSpinningPets([]);\n                    }, 2000);\n                  }}\n                  className=\"px-3 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600\"\n                >\n                  Test Scroll Only\n                </button>\n                <button\n                  onClick={() => {\n                    console.log('Stopping all animations...');\n                    setIsSpinning(false);\n                    setSpinningPets([]);\n                    setShowFinalReveal(false);\n                    setRevealedPet(null);\n                  }}\n                  className=\"px-3 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600\"\n                >\n                  Stop All\n                </button>\n                <button\n                  onClick={() => {\n                    const container = scrollRef.current;\n                    if (container) {\n                      console.log('Manual scroll test');\n                      console.log('Before scroll - scrollLeft:', container.scrollLeft);\n                      console.log('Container width:', container.clientWidth);\n                      console.log('Scroll width:', container.scrollWidth);\n                      container.scrollLeft = 500;\n                      console.log('After scroll - scrollLeft:', container.scrollLeft);\n                    }\n                  }}\n                  className=\"px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600\"\n                >\n                  Test Scroll\n                </button>\n                <button\n                  onClick={() => {\n                    const container = scrollRef.current;\n                    if (container) {\n                      console.log('Testing scroll animation manually...');\n                      let scrollPos = 0;\n                      const interval = setInterval(() => {\n                        scrollPos += 10;\n                        container.scrollLeft = scrollPos;\n                        console.log('Manual scroll position:', scrollPos);\n                        if (scrollPos >= 1000) {\n                          clearInterval(interval);\n                        }\n                      }, 50);\n                    }\n                  }}\n                  className=\"px-3 py-1 bg-indigo-500 text-white text-xs rounded hover:bg-indigo-600\"\n                >\n                  Manual Scroll Test\n                </button>\n                <button\n                  onClick={async () => {\n                    console.log('=== SCROLL CONTAINER DEBUG ===');\n                    \n                    // First check if modal is showing\n                    console.log('Modal state - isSpinning:', isSpinning);\n                    console.log('Number of pets:', spinningPets.length);\n                    \n                    if (!isSpinning) {\n                      console.log('Modal is not showing! Click \"Test Scroll Only\" first.');\n                      return;\n                    }\n                    \n                    // Wait a bit for the modal to render\n                    await new Promise(resolve => setTimeout(resolve, 100));\n                    \n                    const container = scrollRef.current;\n                    if (container) {\n                      console.log('Container element:', container);\n                      console.log('Client width:', container.clientWidth);\n                      console.log('Scroll width:', container.scrollWidth);\n                      console.log('Current scroll left:', container.scrollLeft);\n                      console.log('Can scroll horizontally:', container.scrollWidth > container.clientWidth);\n                      console.log('Expected content width:', spinningPets.length * 120);\n                      console.log('Container style width:', container.style.width);\n                    } else {\n                      console.log('No scroll container found! This means the ref is not connected.');\n                      console.log('scrollRef.current:', scrollRef.current);\n                    }\n                    console.log('==============================');\n                  }}\n                  className=\"px-3 py-1 bg-orange-500 text-white text-xs rounded hover:bg-orange-600\"\n                >\n                  Debug Container\n                </button>\n                <button\n                  onClick={() => {\n                    console.log('Testing modal visibility...');\n                    setShowFinalReveal(true);\n                    setRevealedPet(getRandomPet());\n                    setTimeout(() => {\n                      setShowFinalReveal(false);\n                      setRevealedPet(null);\n                    }, 2000);\n                  }}\n                  className=\"px-3 py-1 bg-purple-500 text-white text-xs rounded hover:bg-purple-600\"\n                >\n                  Test Modal\n                </button>\n                <button\n                  onClick={() => {\n                    console.log('=== SIMPLE MODAL TEST ===');\n                    console.log('Setting isSpinning to true...');\n                    setIsSpinning(true);\n                    setSpinningPets(generateRandomPetsForSpinning());\n                    console.log('Modal should now be visible');\n                    \n                    // Auto-close after 3 seconds\n                    setTimeout(() => {\n                      console.log('Auto-closing modal...');\n                      setIsSpinning(false);\n                      setSpinningPets([]);\n                    }, 3000);\n                  }}\n                  className=\"px-3 py-1 bg-teal-500 text-white text-xs rounded hover:bg-teal-600\"\n                >\n                  Simple Modal Test\n                </button>\n                <button\n                  onClick={() => {\n                    console.log('=== BUTTON CLICK TEST ===');\n                    console.log('Button clicked!');\n                    alert('Button click works!');\n                  }}\n                  className=\"px-3 py-1 bg-gray-500 text-white text-xs rounded hover:bg-gray-600\"\n                >\n                  Test Button Click\n                </button>\n                <button\n                  onClick={() => {\n                    console.log('=== STATE TEST ===');\n                    console.log('Current isSpinning:', isSpinning);\n                    setIsSpinning(!isSpinning);\n                    console.log('Toggled isSpinning to:', !isSpinning);\n                  }}\n                  className=\"px-3 py-1 bg-pink-500 text-white text-xs rounded hover:bg-pink-600\"\n                >\n                  Toggle isSpinning\n                </button>\n                <span className=\"text-xs text-yellow-700\">\n                  isSpinning: {isSpinning.toString()} | Pets: {spinningPets.length} | FinalReveal: {showFinalReveal.toString()}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n              {unopenedBoxes.map((box) => (\n                <div key={box.id} className=\"bg-white rounded-lg shadow-lg p-6 border-2 border-purple-200 hover:border-purple-400 transition-colors\">\n                  <div className=\"text-center\">\n                    <div className=\"text-4xl mb-4\">🎁</div>\n                    <h3 className=\"font-semibold text-gray-900 mb-2\">{box.productName}</h3>\n                    <p className=\"text-sm text-gray-600 mb-4\">\n                      Purchased: {new Date(box.purchaseDate).toLocaleDateString()}\n                    </p>\n                    <button\n                      onClick={() => handleOpenBox(box)}\n                      disabled={openingBox === box.id || isSpinning}\n                      className=\"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:from-purple-400 disabled:to-pink-400 text-white py-3 rounded-lg font-semibold transition-all transform hover:scale-105 disabled:transform-none\"\n                    >\n                      {openingBox === box.id || isSpinning ? (\n                        <>\n                          <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mx-auto mb-2\"></div>\n                          Opening...\n                        </>\n                      ) : (\n                        <>\n                          <Sparkles size={20} className=\"inline mr-2\" />\n                          Open Box\n                        </>\n                      )}\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Pet Collection */}\n        {allPets.length > 0 && (\n          <div className=\"mb-8\">\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-6 flex items-center\">\n              <Users size={28} className=\"mr-3 text-green-600\" />\n              Pet Collection ({allPets.length})\n            </h2>\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n              {allPets.map((pet, index) => (\n                <div key={`${pet.id}-${index}`} className=\"bg-white rounded-lg shadow-md p-4 border-2 hover:shadow-lg transition-shadow\">\n                  <div className=\"text-center\">\n                    <div className=\"text-3xl mb-2\">{pet.image}</div>\n                    <h3 className={`font-semibold text-sm mb-1 ${getRarityColor(pet.rarity)}`}>\n                      {pet.name}\n                    </h3>\n                    <div className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${getRarityBg(pet.rarity)} ${getRarityColor(pet.rarity)}`}>\n                      {getRarityIcon(pet.rarity)} {pet.rarity}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Opened Boxes History */}\n        {openedBoxes.length > 0 && (\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-6 flex items-center\">\n              <Calendar size={28} className=\"mr-3 text-blue-600\" />\n              Opened Boxes History\n            </h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n              {openedBoxes.map((box) => (\n                <div key={box.id} className=\"bg-white rounded-lg shadow-md p-4 border-2 border-gray-200\">\n                  <div className=\"text-center\">\n                    <div className=\"text-3xl mb-2\">{box.pet?.image}</div>\n                    <h3 className=\"font-semibold text-gray-900 mb-1\">{box.productName}</h3>\n                    <p className=\"text-sm text-gray-600 mb-2\">\n                      Opened: {new Date(box.purchaseDate).toLocaleDateString()}\n                    </p>\n                    {box.pet && (\n                      <div className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${getRarityBg(box.pet.rarity)} ${getRarityColor(box.pet.rarity)}`}>\n                        {getRarityIcon(box.pet.rarity)} {box.pet.name}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Empty State */}\n        {unopenedBoxes.length === 0 && allPets.length === 0 && (\n          <div className=\"text-center py-12\">\n            <div className=\"text-6xl mb-4\">🎁</div>\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Your bag is empty</h2>\n            <p className=\"text-gray-600 mb-6\">Purchase some pet boxes to start your collection!</p>\n            <button\n              onClick={() => navigate('/products')}\n              className=\"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors\"\n            >\n              Browse Pet Boxes\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Bag; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}