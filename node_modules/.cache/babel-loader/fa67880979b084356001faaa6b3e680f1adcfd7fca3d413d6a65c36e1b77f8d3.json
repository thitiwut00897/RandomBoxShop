{"ast":null,"code":"import _objectSpread from\"/Users/thitiwutphophan/shop/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef}from'react';import{useBag}from'../contexts/BagContext';import{useAuth}from'../contexts/AuthContext';import{useNavigate}from'react-router-dom';import{Package,Gift,Sparkles,ArrowLeft,Users,Calendar}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Bag=()=>{const{openPetBox,getUnopenedBoxes,getOpenedBoxes,getAllPets,getRandomPet,addPetToCollection,userBag}=useBag();const{user}=useAuth();const navigate=useNavigate();const[openingBox,setOpeningBox]=useState(null);const[showPetReveal,setShowPetReveal]=useState(false);const[revealedPet,setRevealedPet]=useState(null);// CS:GO Style Animation States\nconst[isSpinning,setIsSpinning]=useState(false);const[spinningPets,setSpinningPets]=useState([]);const[currentSpinningIndex,setCurrentSpinningIndex]=useState(0);const[showFinalReveal,setShowFinalReveal]=useState(false);const[scrollProgress,setScrollProgress]=useState(0);const scrollRef=useRef(null);const audioContextRef=useRef(null);// Sound effects\nconst playScrollSound=()=>{try{if(!audioContextRef.current){audioContextRef.current=new(window.AudioContext||window.webkitAudioContext)();}const oscillator=audioContextRef.current.createOscillator();const gainNode=audioContextRef.current.createGain();oscillator.connect(gainNode);gainNode.connect(audioContextRef.current.destination);oscillator.frequency.setValueAtTime(800,audioContextRef.current.currentTime);oscillator.frequency.exponentialRampToValueAtTime(400,audioContextRef.current.currentTime+0.1);gainNode.gain.setValueAtTime(0.1,audioContextRef.current.currentTime);gainNode.gain.exponentialRampToValueAtTime(0.01,audioContextRef.current.currentTime+0.1);oscillator.start(audioContextRef.current.currentTime);oscillator.stop(audioContextRef.current.currentTime+0.1);}catch(error){console.log('Audio not supported');}};const playRevealSound=()=>{try{if(!audioContextRef.current){audioContextRef.current=new(window.AudioContext||window.webkitAudioContext)();}const oscillator=audioContextRef.current.createOscillator();const gainNode=audioContextRef.current.createGain();oscillator.connect(gainNode);gainNode.connect(audioContextRef.current.destination);// Ascending tone for reveal\noscillator.frequency.setValueAtTime(200,audioContextRef.current.currentTime);oscillator.frequency.exponentialRampToValueAtTime(800,audioContextRef.current.currentTime+0.3);gainNode.gain.setValueAtTime(0.2,audioContextRef.current.currentTime);gainNode.gain.exponentialRampToValueAtTime(0.01,audioContextRef.current.currentTime+0.3);oscillator.start(audioContextRef.current.currentTime);oscillator.stop(audioContextRef.current.currentTime+0.3);}catch(error){console.log('Audio not supported');}};const unopenedBoxes=getUnopenedBoxes();const openedBoxes=getOpenedBoxes();const allPets=getAllPets();const handleOpenBox=async box=>{console.log('Opening box:',box.id);if(openingBox)return;// Prevent multiple openings\n// Set animation state immediately\nsetOpeningBox(box.id);setIsSpinning(true);setShowPetReveal(false);setShowFinalReveal(false);setScrollProgress(0);console.log('Animation state set - isSpinning:',true);try{console.log('Starting animation process...');// First, get a random pet for the animation (but don't add to collection yet)\nconst randomPet=getRandomPet();console.log('Random pet selected:',randomPet.name);setRevealedPet(randomPet);// Generate random pets for scroll animation (like CS:GO)\nconst randomPets=generateRandomPetsForSpinning();console.log('Generated',randomPets.length,'pets for animation');setSpinningPets(randomPets);// Wait a bit for the state to update and modal to show\nawait new Promise(resolve=>setTimeout(resolve,100));// Start scroll animation and wait for it to complete (5 seconds)\nconsole.log('Starting scroll animation...');await startScrollAnimation(randomPets.length);console.log('Animation completed!');// After animation completes, add the pet to the collection\nconsole.log('Adding pet to collection:',randomPet.name);addPetToCollection(randomPet,box.id);// Mark the box as opened (this will be handled by the context)\n// Hide the scroll animation and return to bag\nsetIsSpinning(false);setSpinningPets([]);}catch(error){console.error('Error opening box:',error);setIsSpinning(false);setSpinningPets([]);}finally{setOpeningBox(null);}};const generateRandomPetsForSpinning=()=>{// Generate 20 random pets for the spinning animation\nconst pets=[];const allPossiblePets=[{id:'1',name:'Common Cat',rarity:'Common',image:'🐱',probability:0.4,description:'A friendly common cat'},{id:'2',name:'Common Dog',rarity:'Common',image:'🐕',probability:0.4,description:'A loyal common dog'},{id:'3',name:'Uncommon Fox',rarity:'Uncommon',image:'🦊',probability:0.25,description:'A clever uncommon fox'},{id:'4',name:'Uncommon Rabbit',rarity:'Uncommon',image:'🐰',probability:0.25,description:'A quick uncommon rabbit'},{id:'5',name:'Rare Dragon',rarity:'Rare',image:'🐉',probability:0.2,description:'A powerful rare dragon'},{id:'6',name:'Rare Phoenix',rarity:'Rare',image:'🦅',probability:0.2,description:'A majestic rare phoenix'},{id:'7',name:'Legendary Leviathan',rarity:'Legendary',image:'🐋',probability:0.1,description:'A massive legendary leviathan'},{id:'8',name:'Mythical Celestial',rarity:'Mythical',image:'⭐',probability:0.03,description:'A divine mythical celestial being'},{id:'9',name:'Divine Guardian',rarity:'Divine',image:'👼',probability:0.015,description:'A sacred divine guardian'},{id:'10',name:'Prismatic Crystal',rarity:'Prismatic',image:'💎',probability:0.005,description:'A rare prismatic crystal entity'}];for(let i=0;i<20;i++){const randomPet=allPossiblePets[Math.floor(Math.random()*allPossiblePets.length)];pets.push(_objectSpread(_objectSpread({},randomPet),{},{id:\"\".concat(randomPet.id,\"_\").concat(i),rarity:normalizeRarity(randomPet.rarity)}));}return pets;};// Horizontal scroll animation for CS:GO style\nconst startScrollAnimation=async numPets=>{console.log('startScrollAnimation called with',numPets,'pets');return new Promise(resolve=>{const container=scrollRef.current;if(!container){console.log('No container found, resolving immediately');return resolve();}// Wait for the container to be properly rendered\nsetTimeout(()=>{const itemWidth=96;// px, adjust to match the rendered width\nconst visibleCount=5;// number of pets visible at once\nconst totalScroll=Math.max(0,(numPets-visibleCount)*itemWidth);const duration=5000;// 5 seconds in milliseconds\nconst startTime=Date.now();let lastSoundTime=0;console.log('Animation parameters:',{itemWidth,visibleCount,totalScroll,duration});console.log('Container scrollWidth:',container.scrollWidth);console.log('Container clientWidth:',container.clientWidth);console.log('Container scrollLeft:',container.scrollLeft);// Ensure container starts at 0\ncontainer.scrollLeft=0;function animate(){if(!container)return resolve();const elapsed=Date.now()-startTime;const progress=Math.min(elapsed/duration,1);// Update progress for visual effects\nsetScrollProgress(progress);// Ease out: slow down as we approach the end\nconst ease=1-Math.pow(1-progress,3);const currentScroll=totalScroll*ease;console.log('Animation frame:',{progress:progress.toFixed(3),ease:ease.toFixed(3),currentScroll:Math.round(currentScroll),scrollLeft:Math.round(container.scrollLeft),totalScroll});// Actually scroll the container\ncontainer.scrollLeft=currentScroll;// Play scroll sound periodically (every 200ms)\nif(elapsed-lastSoundTime>200){playScrollSound();lastSoundTime=elapsed;}if(progress<1){requestAnimationFrame(animate);}else{// Ensure we end exactly at the final position\ncontainer.scrollLeft=totalScroll;setScrollProgress(1);// Play reveal sound when animation completes\nsetTimeout(()=>{playRevealSound();},100);console.log('Animation resolved - Final scrollLeft:',container.scrollLeft);resolve();}}console.log('Starting animation loop');animate();},100);// Small delay to ensure DOM is ready\n});};const getRarityColor=rarity=>{switch(rarity){case'Common':return'text-gray-600';case'Uncommon':return'text-blue-600';case'Rare':return'text-purple-600';case'Legendary':return'text-yellow-600';case'Mythical':return'text-orange-600';case'Divine':return'text-pink-600';case'Prismatic':return'text-rainbow';default:return'text-gray-600';}};const getRarityBg=rarity=>{switch(rarity){case'Common':return'bg-gray-100';case'Uncommon':return'bg-blue-100';case'Rare':return'bg-purple-100';case'Legendary':return'bg-yellow-100';case'Mythical':return'bg-orange-100';case'Divine':return'bg-pink-100';case'Prismatic':return'bg-gradient-to-r from-red-100 via-yellow-100 to-purple-100';default:return'bg-gray-100';}};const getRarityGlow=rarity=>{switch(rarity){case'Common':return'shadow-gray-400';case'Uncommon':return'shadow-blue-400';case'Rare':return'shadow-purple-400';case'Legendary':return'shadow-yellow-400';case'Mythical':return'shadow-orange-400';case'Divine':return'shadow-pink-400';case'Prismatic':return'shadow-rainbow';default:return'shadow-gray-400';}};const getRarityIcon=rarity=>{switch(rarity){case'Common':return'⭐';case'Uncommon':return'🌟';case'Rare':return'💫';case'Legendary':return'⚡';case'Mythical':return'🔥';case'Divine':return'👑';case'Prismatic':return'💎';default:return'⭐';}};// Helper to normalize rarity to Pet type\nconst normalizeRarity=rarity=>{switch(rarity){case'Common':case'Uncommon':case'Rare':case'Legendary':case'Mythical':case'Divine':case'Prismatic':return rarity;default:return'Unknown';}};if(!user){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83D\\uDD12\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Login Required\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Please login to view your bag\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/login'),className:\"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors\",children:\"Login Now\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow-sm border-b\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-2\",children:\"\\uD83C\\uDF92 Your Pet Collection\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Open your pet boxes and collect amazing pets from Grow a Garden!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap justify-center gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-purple-100 text-purple-700 px-3 py-1 rounded-full\",children:[/*#__PURE__*/_jsx(Sparkles,{size:14,className:\"mr-1\"}),\"CS:GO Style Opening\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-pink-100 text-pink-700 px-3 py-1 rounded-full\",children:[/*#__PURE__*/_jsx(Gift,{size:14,className:\"mr-1\"}),\"Random Pet Selection\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-100 text-blue-700 px-3 py-1 rounded-full\",children:[/*#__PURE__*/_jsx(Package,{size:14,className:\"mr-1\"}),\"Line Notifications\"]})]})]})})}),isSpinning&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full max-w-3xl mx-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-gray-900 to-gray-800 rounded-2xl p-8 border-4 border-purple-500 shadow-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-white mb-2\",children:\"Opening Pet Box\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-300\",children:\"Scrolling for your pet...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-purple-300 mt-2\",children:[\"Debug: Pets: \",spinningPets.length,\" | Progress: \",Math.round(scrollProgress*100),\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 w-full bg-gray-700 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-100 ease-out\",style:{width:\"\".concat(scrollProgress*100,\"%\")}})}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-purple-300 text-sm mt-2\",children:[Math.round(scrollProgress*100),\"% Complete\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative h-32 overflow-hidden border-2 border-red-500\",children:[/*#__PURE__*/_jsx(\"div\",{ref:scrollRef,className:\"flex flex-row items-center h-32 overflow-x-scroll scrollbar-hide\",style:{scrollBehavior:'auto',width:'100%',minWidth:'1200px'// Increased width for better scrolling\n},children:spinningPets.length>0?spinningPets.map((pet,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center w-24 h-28 mx-1 rounded-xl bg-white shadow-lg border-2 \".concat(getRarityBg(pet.rarity),\" \").concat(getRarityGlow(pet.rarity),\" transition-all duration-300 hover:scale-105 flex-shrink-0\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl mb-1 animate-pulse\",children:pet.image||'❓'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-bold \".concat(getRarityColor(pet.rarity)),children:pet.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs\",children:[getRarityIcon(pet.rarity),\" \",pet.rarity]})]},pet.id+idx)):/*#__PURE__*/// Fallback if no pets are loaded\n_jsx(\"div\",{className:\"flex items-center justify-center w-full h-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-white text-xl\",children:\"Loading pets...\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 left-1/2 transform -translate-x-1/2 w-1 h-full bg-yellow-400 shadow-lg z-10 animate-pulse\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 left-1/2 transform -translate-x-1/2 w-24 h-full bg-gradient-to-r from-transparent via-yellow-400/20 to-transparent z-5\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 left-1/2 transform -translate-x-1/2 text-yellow-400 animate-ping\",children:\"\\u2728\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-yellow-400 animate-ping delay-300\",children:\"\\u2728\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-purple-400 rounded-full animate-pulse\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-pink-400 rounded-full animate-pulse delay-100\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-purple-400 rounded-full animate-pulse delay-200\"})]})})]})})}),showFinalReveal&&revealedPet&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-r from-purple-600/20 to-pink-600/20 animate-pulse\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-gradient-to-br from-gray-900 to-gray-800 rounded-3xl p-12 max-w-lg mx-4 border-4 \".concat(getRarityGlow(revealedPet.rarity),\" shadow-2xl animate-bounce\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 rounded-3xl \".concat(getRarityGlow(revealedPet.rarity),\" opacity-50 blur-xl\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative z-10 text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-8xl mb-4 animate-pulse\",children:revealedPet.image}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 left-1/4 text-2xl animate-ping\",children:\"\\u2728\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-1/4 right-1/4 text-2xl animate-ping delay-100\",children:\"\\u2728\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-1/4 left-1/3 text-2xl animate-ping delay-200\",children:\"\\u2728\"})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl font-bold text-white mb-4 bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent\",children:\"\\uD83C\\uDF89 CONGRATULATIONS!\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl text-white mb-4\",children:[\"You got: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold \".concat(getRarityColor(revealedPet.rarity)),children:revealedPet.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inline-block px-6 py-3 rounded-full text-lg font-bold \".concat(getRarityBg(revealedPet.rarity),\" \").concat(getRarityColor(revealedPet.rarity),\" border-2 border-white shadow-lg\"),children:[getRarityIcon(revealedPet.rarity),\" \",revealedPet.rarity]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300 mt-4 text-sm\",children:revealedPet.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-purple-300 mt-2 text-xs\",children:[(revealedPet.probability*100).toFixed(1),\"% chance to obtain\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 pointer-events-none\",children:[...Array(20)].map((_,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"absolute w-2 h-2 bg-yellow-400 rounded-full animate-ping\",style:{left:\"\".concat(Math.random()*100,\"%\"),top:\"\".concat(Math.random()*100,\"%\"),animationDelay:\"\".concat(Math.random()*2,\"s\"),animationDuration:\"\".concat(1+Math.random(),\"s\")}},i))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/'),className:\"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors\",children:[/*#__PURE__*/_jsx(ArrowLeft,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"Back to Home\"})]})}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(Package,{size:32,className:\"mr-3 text-purple-600\"}),\"My Bag\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-4 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-purple-600\",children:unopenedBoxes.length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:\"Unopened Boxes\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-4 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-green-600\",children:openedBoxes.length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:\"Opened Boxes\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-4 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-blue-600\",children:allPets.length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:\"Total Pets\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-4 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-yellow-600\",children:allPets.filter(pet=>['Rare','Legendary','Mythical','Divine','Prismatic'].includes(pet.rarity)).length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:\"Rare Pets\"})]})]}),unopenedBoxes.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-6 flex items-center\",children:[/*#__PURE__*/_jsx(Gift,{size:28,className:\"mr-3 text-purple-600\"}),\"Unopened Pet Boxes\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-yellow-800 mb-2\",children:\"Debug Animation Test\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 flex-wrap\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{console.log('Testing animation state...');setIsSpinning(true);setSpinningPets(generateRandomPetsForSpinning());setScrollProgress(0);},className:\"px-3 py-1 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600\",children:\"Test Animation\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{console.log('Stopping animation...');setIsSpinning(false);setSpinningPets([]);},className:\"px-3 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600\",children:\"Stop Animation\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const container=scrollRef.current;if(container){console.log('Manual scroll test');console.log('Before scroll - scrollLeft:',container.scrollLeft);container.scrollLeft=500;console.log('After scroll - scrollLeft:',container.scrollLeft);}},className:\"px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600\",children:\"Test Scroll\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-yellow-700\",children:[\"isSpinning: \",isSpinning.toString(),\" | Pets: \",spinningPets.length]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\",children:unopenedBoxes.map(box=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6 border-2 border-purple-200 hover:border-purple-400 transition-colors\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl mb-4\",children:\"\\uD83C\\uDF81\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-2\",children:box.productName}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mb-4\",children:[\"Purchased: \",new Date(box.purchaseDate).toLocaleDateString()]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleOpenBox(box),disabled:openingBox===box.id||isSpinning,className:\"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:from-purple-400 disabled:to-pink-400 text-white py-3 rounded-lg font-semibold transition-all transform hover:scale-105 disabled:transform-none\",children:openingBox===box.id||isSpinning?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mx-auto mb-2\"}),\"Opening...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Sparkles,{size:20,className:\"inline mr-2\"}),\"Open Box\"]})})]})},box.id))})]}),allPets.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-6 flex items-center\",children:[/*#__PURE__*/_jsx(Users,{size:28,className:\"mr-3 text-green-600\"}),\"Pet Collection (\",allPets.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\",children:allPets.map((pet,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md p-4 border-2 hover:shadow-lg transition-shadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl mb-2\",children:pet.image}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-sm mb-1 \".concat(getRarityColor(pet.rarity)),children:pet.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"inline-block px-2 py-1 rounded-full text-xs font-medium \".concat(getRarityBg(pet.rarity),\" \").concat(getRarityColor(pet.rarity)),children:[getRarityIcon(pet.rarity),\" \",pet.rarity]})]})},\"\".concat(pet.id,\"-\").concat(index)))})]}),openedBoxes.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-6 flex items-center\",children:[/*#__PURE__*/_jsx(Calendar,{size:28,className:\"mr-3 text-blue-600\"}),\"Opened Boxes History\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\",children:openedBoxes.map(box=>{var _box$pet;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md p-4 border-2 border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl mb-2\",children:(_box$pet=box.pet)===null||_box$pet===void 0?void 0:_box$pet.image}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-1\",children:box.productName}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:[\"Opened: \",new Date(box.purchaseDate).toLocaleDateString()]}),box.pet&&/*#__PURE__*/_jsxs(\"div\",{className:\"inline-block px-2 py-1 rounded-full text-xs font-medium \".concat(getRarityBg(box.pet.rarity),\" \").concat(getRarityColor(box.pet.rarity)),children:[getRarityIcon(box.pet.rarity),\" \",box.pet.name]})]})},box.id);})})]}),unopenedBoxes.length===0&&allPets.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83C\\uDF81\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Your bag is empty\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Purchase some pet boxes to start your collection!\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/products'),className:\"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors\",children:\"Browse Pet Boxes\"})]})]})]});};export default Bag;","map":{"version":3,"names":["React","useState","useRef","useBag","useAuth","useNavigate","Package","Gift","Sparkles","ArrowLeft","Users","Calendar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Bag","openPetBox","getUnopenedBoxes","getOpenedBoxes","getAllPets","getRandomPet","addPetToCollection","userBag","user","navigate","openingBox","setOpeningBox","showPetReveal","setShowPetReveal","revealedPet","setRevealedPet","isSpinning","setIsSpinning","spinningPets","setSpinningPets","currentSpinningIndex","setCurrentSpinningIndex","showFinalReveal","setShowFinalReveal","scrollProgress","setScrollProgress","scrollRef","audioContextRef","playScrollSound","current","window","AudioContext","webkitAudioContext","oscillator","createOscillator","gainNode","createGain","connect","destination","frequency","setValueAtTime","currentTime","exponentialRampToValueAtTime","gain","start","stop","error","console","log","playRevealSound","unopenedBoxes","openedBoxes","allPets","handleOpenBox","box","id","randomPet","name","randomPets","generateRandomPetsForSpinning","length","Promise","resolve","setTimeout","startScrollAnimation","pets","allPossiblePets","rarity","image","probability","description","i","Math","floor","random","push","_objectSpread","concat","normalizeRarity","numPets","container","itemWidth","visibleCount","totalScroll","max","duration","startTime","Date","now","lastSoundTime","scrollWidth","clientWidth","scrollLeft","animate","elapsed","progress","min","ease","pow","currentScroll","toFixed","round","requestAnimationFrame","getRarityColor","getRarityBg","getRarityGlow","getRarityIcon","className","children","onClick","size","style","width","ref","scrollBehavior","minWidth","map","pet","idx","Array","_","left","top","animationDelay","animationDuration","filter","includes","toString","productName","purchaseDate","toLocaleDateString","disabled","index","_box$pet"],"sources":["/Users/thitiwutphophan/shop/src/pages/Bag.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useBag } from '../contexts/BagContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport { \n  Package, \n  Gift, \n  Sparkles, \n  ArrowLeft,\n  Users,\n  Calendar\n} from 'lucide-react';\nimport { PetBox, Pet } from '../types';\n\nconst Bag: React.FC = () => {\n  const { openPetBox, getUnopenedBoxes, getOpenedBoxes, getAllPets, getRandomPet, addPetToCollection, userBag } = useBag();\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [openingBox, setOpeningBox] = useState<string | null>(null);\n  const [showPetReveal, setShowPetReveal] = useState(false);\n  const [revealedPet, setRevealedPet] = useState<Pet | null>(null);\n  \n  // CS:GO Style Animation States\n  const [isSpinning, setIsSpinning] = useState(false);\n  const [spinningPets, setSpinningPets] = useState<Pet[]>([]);\n  const [currentSpinningIndex, setCurrentSpinningIndex] = useState(0);\n  const [showFinalReveal, setShowFinalReveal] = useState(false);\n  const [scrollProgress, setScrollProgress] = useState(0);\n\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const audioContextRef = useRef<AudioContext | null>(null);\n\n  // Sound effects\n  const playScrollSound = () => {\n    try {\n      if (!audioContextRef.current) {\n        audioContextRef.current = new (window.AudioContext || (window as any).webkitAudioContext)();\n      }\n      \n      const oscillator = audioContextRef.current.createOscillator();\n      const gainNode = audioContextRef.current.createGain();\n      \n      oscillator.connect(gainNode);\n      gainNode.connect(audioContextRef.current.destination);\n      \n      oscillator.frequency.setValueAtTime(800, audioContextRef.current.currentTime);\n      oscillator.frequency.exponentialRampToValueAtTime(400, audioContextRef.current.currentTime + 0.1);\n      \n      gainNode.gain.setValueAtTime(0.1, audioContextRef.current.currentTime);\n      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContextRef.current.currentTime + 0.1);\n      \n      oscillator.start(audioContextRef.current.currentTime);\n      oscillator.stop(audioContextRef.current.currentTime + 0.1);\n    } catch (error) {\n      console.log('Audio not supported');\n    }\n  };\n\n  const playRevealSound = () => {\n    try {\n      if (!audioContextRef.current) {\n        audioContextRef.current = new (window.AudioContext || (window as any).webkitAudioContext)();\n      }\n      \n      const oscillator = audioContextRef.current.createOscillator();\n      const gainNode = audioContextRef.current.createGain();\n      \n      oscillator.connect(gainNode);\n      gainNode.connect(audioContextRef.current.destination);\n      \n      // Ascending tone for reveal\n      oscillator.frequency.setValueAtTime(200, audioContextRef.current.currentTime);\n      oscillator.frequency.exponentialRampToValueAtTime(800, audioContextRef.current.currentTime + 0.3);\n      \n      gainNode.gain.setValueAtTime(0.2, audioContextRef.current.currentTime);\n      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContextRef.current.currentTime + 0.3);\n      \n      oscillator.start(audioContextRef.current.currentTime);\n      oscillator.stop(audioContextRef.current.currentTime + 0.3);\n    } catch (error) {\n      console.log('Audio not supported');\n    }\n  };\n\n  const unopenedBoxes = getUnopenedBoxes();\n  const openedBoxes = getOpenedBoxes();\n  const allPets = getAllPets();\n\n  const handleOpenBox = async (box: PetBox) => {\n    console.log('Opening box:', box.id);\n    if (openingBox) return; // Prevent multiple openings\n\n    // Set animation state immediately\n    setOpeningBox(box.id);\n    setIsSpinning(true);\n    setShowPetReveal(false);\n    setShowFinalReveal(false);\n    setScrollProgress(0);\n    \n    console.log('Animation state set - isSpinning:', true);\n    \n    try {\n      console.log('Starting animation process...');\n      // First, get a random pet for the animation (but don't add to collection yet)\n      const randomPet = getRandomPet();\n      console.log('Random pet selected:', randomPet.name);\n      setRevealedPet(randomPet);\n      \n      // Generate random pets for scroll animation (like CS:GO)\n      const randomPets = generateRandomPetsForSpinning();\n      console.log('Generated', randomPets.length, 'pets for animation');\n      setSpinningPets(randomPets);\n      \n      // Wait a bit for the state to update and modal to show\n      await new Promise(resolve => setTimeout(resolve, 100));\n      \n      // Start scroll animation and wait for it to complete (5 seconds)\n      console.log('Starting scroll animation...');\n      await startScrollAnimation(randomPets.length);\n      console.log('Animation completed!');\n      \n      // After animation completes, add the pet to the collection\n      console.log('Adding pet to collection:', randomPet.name);\n      addPetToCollection(randomPet, box.id);\n      \n      // Mark the box as opened (this will be handled by the context)\n      \n      // Hide the scroll animation and return to bag\n      setIsSpinning(false);\n      setSpinningPets([]);\n      \n    } catch (error) {\n      console.error('Error opening box:', error);\n      setIsSpinning(false);\n      setSpinningPets([]);\n    } finally {\n      setOpeningBox(null);\n    }\n  };\n\n  const generateRandomPetsForSpinning = (): Pet[] => {\n    // Generate 20 random pets for the spinning animation\n    const pets: Pet[] = [];\n    const allPossiblePets = [\n      { id: '1', name: 'Common Cat', rarity: 'Common', image: '🐱', probability: 0.4, description: 'A friendly common cat' },\n      { id: '2', name: 'Common Dog', rarity: 'Common', image: '🐕', probability: 0.4, description: 'A loyal common dog' },\n      { id: '3', name: 'Uncommon Fox', rarity: 'Uncommon', image: '🦊', probability: 0.25, description: 'A clever uncommon fox' },\n      { id: '4', name: 'Uncommon Rabbit', rarity: 'Uncommon', image: '🐰', probability: 0.25, description: 'A quick uncommon rabbit' },\n      { id: '5', name: 'Rare Dragon', rarity: 'Rare', image: '🐉', probability: 0.2, description: 'A powerful rare dragon' },\n      { id: '6', name: 'Rare Phoenix', rarity: 'Rare', image: '🦅', probability: 0.2, description: 'A majestic rare phoenix' },\n      { id: '7', name: 'Legendary Leviathan', rarity: 'Legendary', image: '🐋', probability: 0.1, description: 'A massive legendary leviathan' },\n      { id: '8', name: 'Mythical Celestial', rarity: 'Mythical', image: '⭐', probability: 0.03, description: 'A divine mythical celestial being' },\n      { id: '9', name: 'Divine Guardian', rarity: 'Divine', image: '👼', probability: 0.015, description: 'A sacred divine guardian' },\n      { id: '10', name: 'Prismatic Crystal', rarity: 'Prismatic', image: '💎', probability: 0.005, description: 'A rare prismatic crystal entity' }\n    ];\n\n    for (let i = 0; i < 20; i++) {\n      const randomPet = allPossiblePets[Math.floor(Math.random() * allPossiblePets.length)];\n      pets.push({ \n        ...randomPet, \n        id: `${randomPet.id}_${i}`,\n        rarity: normalizeRarity(randomPet.rarity)\n      });\n    }\n    return pets;\n  };\n\n  // Horizontal scroll animation for CS:GO style\n  const startScrollAnimation = async (numPets: number): Promise<void> => {\n    console.log('startScrollAnimation called with', numPets, 'pets');\n    return new Promise((resolve) => {\n      const container = scrollRef.current;\n      if (!container) {\n        console.log('No container found, resolving immediately');\n        return resolve();\n      }\n      \n      // Wait for the container to be properly rendered\n      setTimeout(() => {\n        const itemWidth = 96; // px, adjust to match the rendered width\n        const visibleCount = 5; // number of pets visible at once\n        const totalScroll = Math.max(0, (numPets - visibleCount) * itemWidth);\n        const duration = 5000; // 5 seconds in milliseconds\n        const startTime = Date.now();\n        let lastSoundTime = 0;\n        \n        console.log('Animation parameters:', { itemWidth, visibleCount, totalScroll, duration });\n        console.log('Container scrollWidth:', container.scrollWidth);\n        console.log('Container clientWidth:', container.clientWidth);\n        console.log('Container scrollLeft:', container.scrollLeft);\n        \n        // Ensure container starts at 0\n        container.scrollLeft = 0;\n        \n        function animate() {\n          if (!container) return resolve();\n          \n          const elapsed = Date.now() - startTime;\n          const progress = Math.min(elapsed / duration, 1);\n          \n          // Update progress for visual effects\n          setScrollProgress(progress);\n          \n          // Ease out: slow down as we approach the end\n          const ease = 1 - Math.pow(1 - progress, 3);\n          const currentScroll = totalScroll * ease;\n          \n          console.log('Animation frame:', { \n            progress: progress.toFixed(3), \n            ease: ease.toFixed(3), \n            currentScroll: Math.round(currentScroll),\n            scrollLeft: Math.round(container.scrollLeft),\n            totalScroll\n          });\n          \n          // Actually scroll the container\n          container.scrollLeft = currentScroll;\n          \n          // Play scroll sound periodically (every 200ms)\n          if (elapsed - lastSoundTime > 200) {\n            playScrollSound();\n            lastSoundTime = elapsed;\n          }\n          \n          if (progress < 1) {\n            requestAnimationFrame(animate);\n          } else {\n            // Ensure we end exactly at the final position\n            container.scrollLeft = totalScroll;\n            setScrollProgress(1);\n            \n            // Play reveal sound when animation completes\n            setTimeout(() => {\n              playRevealSound();\n            }, 100);\n            \n            console.log('Animation resolved - Final scrollLeft:', container.scrollLeft);\n            resolve();\n          }\n        }\n        \n        console.log('Starting animation loop');\n        animate();\n      }, 100); // Small delay to ensure DOM is ready\n    });\n  };\n\n  const getRarityColor = (rarity: string) => {\n    switch (rarity) {\n      case 'Common': return 'text-gray-600';\n      case 'Uncommon': return 'text-blue-600';\n      case 'Rare': return 'text-purple-600';\n      case 'Legendary': return 'text-yellow-600';\n      case 'Mythical': return 'text-orange-600';\n      case 'Divine': return 'text-pink-600';\n      case 'Prismatic': return 'text-rainbow';\n      default: return 'text-gray-600';\n    }\n  };\n\n  const getRarityBg = (rarity: string) => {\n    switch (rarity) {\n      case 'Common': return 'bg-gray-100';\n      case 'Uncommon': return 'bg-blue-100';\n      case 'Rare': return 'bg-purple-100';\n      case 'Legendary': return 'bg-yellow-100';\n      case 'Mythical': return 'bg-orange-100';\n      case 'Divine': return 'bg-pink-100';\n      case 'Prismatic': return 'bg-gradient-to-r from-red-100 via-yellow-100 to-purple-100';\n      default: return 'bg-gray-100';\n    }\n  };\n\n  const getRarityGlow = (rarity: string) => {\n    switch (rarity) {\n      case 'Common': return 'shadow-gray-400';\n      case 'Uncommon': return 'shadow-blue-400';\n      case 'Rare': return 'shadow-purple-400';\n      case 'Legendary': return 'shadow-yellow-400';\n      case 'Mythical': return 'shadow-orange-400';\n      case 'Divine': return 'shadow-pink-400';\n      case 'Prismatic': return 'shadow-rainbow';\n      default: return 'shadow-gray-400';\n    }\n  };\n\n  const getRarityIcon = (rarity: string) => {\n    switch (rarity) {\n      case 'Common': return '⭐';\n      case 'Uncommon': return '🌟';\n      case 'Rare': return '💫';\n      case 'Legendary': return '⚡';\n      case 'Mythical': return '🔥';\n      case 'Divine': return '👑';\n      case 'Prismatic': return '💎';\n      default: return '⭐';\n    }\n  };\n\n  // Helper to normalize rarity to Pet type\n  const normalizeRarity = (rarity: string): Pet['rarity'] => {\n    switch (rarity) {\n      case 'Common':\n      case 'Uncommon':\n      case 'Rare':\n      case 'Legendary':\n      case 'Mythical':\n      case 'Divine':\n      case 'Prismatic':\n        return rarity;\n      default:\n        return 'Unknown';\n    }\n  };\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"text-6xl mb-4\">🔒</div>\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">Login Required</h1>\n          <p className=\"text-gray-600 mb-6\">Please login to view your bag</p>\n          <button\n            onClick={() => navigate('/login')}\n            className=\"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors\"\n          >\n            Login Now\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50\">\n      {/* Header with Features */}\n      <div className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"text-center\">\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">🎒 Your Pet Collection</h1>\n            <p className=\"text-gray-600 mb-4\">Open your pet boxes and collect amazing pets from Grow a Garden!</p>\n            \n            {/* Feature Highlights */}\n            <div className=\"flex flex-wrap justify-center gap-4 text-sm\">\n              <div className=\"flex items-center bg-purple-100 text-purple-700 px-3 py-1 rounded-full\">\n                <Sparkles size={14} className=\"mr-1\" />\n                CS:GO Style Opening\n              </div>\n              <div className=\"flex items-center bg-pink-100 text-pink-700 px-3 py-1 rounded-full\">\n                <Gift size={14} className=\"mr-1\" />\n                Random Pet Selection\n              </div>\n              <div className=\"flex items-center bg-blue-100 text-blue-700 px-3 py-1 rounded-full\">\n                <Package size={14} className=\"mr-1\" />\n                Line Notifications\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* CS:GO Style Horizontal Scroll Animation */}\n      {isSpinning && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50\">\n          <div className=\"relative w-full max-w-3xl mx-4\">\n            <div className=\"bg-gradient-to-r from-gray-900 to-gray-800 rounded-2xl p-8 border-4 border-purple-500 shadow-2xl\">\n              <div className=\"text-center mb-6\">\n                <h2 className=\"text-3xl font-bold text-white mb-2\">Opening Pet Box</h2>\n                <p className=\"text-purple-300\">Scrolling for your pet...</p>\n                \n                {/* Debug Info */}\n                <div className=\"text-xs text-purple-300 mt-2\">\n                  Debug: Pets: {spinningPets.length} | Progress: {Math.round(scrollProgress * 100)}%\n                </div>\n                \n                {/* Progress Bar */}\n                <div className=\"mt-4 w-full bg-gray-700 rounded-full h-2\">\n                  <div \n                    className=\"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-100 ease-out\"\n                    style={{ width: `${scrollProgress * 100}%` }}\n                  ></div>\n                </div>\n                \n                {/* Progress Text */}\n                <p className=\"text-purple-300 text-sm mt-2\">\n                  {Math.round(scrollProgress * 100)}% Complete\n                </p>\n              </div>\n              \n              {/* Horizontal scroll container */}\n              <div className=\"relative h-32 overflow-hidden border-2 border-red-500\">\n                <div\n                  ref={scrollRef}\n                  className=\"flex flex-row items-center h-32 overflow-x-scroll scrollbar-hide\"\n                  style={{ \n                    scrollBehavior: 'auto', \n                    width: '100%',\n                    minWidth: '1200px' // Increased width for better scrolling\n                  }}\n                >\n                  {spinningPets.length > 0 ? (\n                    spinningPets.map((pet, idx) => (\n                      <div\n                        key={pet.id + idx}\n                        className={`flex flex-col items-center justify-center w-24 h-28 mx-1 rounded-xl bg-white shadow-lg border-2 ${getRarityBg(pet.rarity)} ${getRarityGlow(pet.rarity)} transition-all duration-300 hover:scale-105 flex-shrink-0`}\n                      >\n                        <div className=\"text-4xl mb-1 animate-pulse\">{pet.image || '❓'}</div>\n                        <div className={`text-xs font-bold ${getRarityColor(pet.rarity)}`}>{pet.name}</div>\n                        <div className=\"text-xs\">{getRarityIcon(pet.rarity)} {pet.rarity}</div>\n                      </div>\n                    ))\n                  ) : (\n                    // Fallback if no pets are loaded\n                    <div className=\"flex items-center justify-center w-full h-full\">\n                      <div className=\"text-white text-xl\">Loading pets...</div>\n                    </div>\n                  )}\n                </div>\n                \n                {/* Center indicator with enhanced effects */}\n                <div className=\"absolute top-0 left-1/2 transform -translate-x-1/2 w-1 h-full bg-yellow-400 shadow-lg z-10 animate-pulse\"></div>\n                \n                {/* Glow effects around center */}\n                <div className=\"absolute top-0 left-1/2 transform -translate-x-1/2 w-24 h-full bg-gradient-to-r from-transparent via-yellow-400/20 to-transparent z-5\"></div>\n                \n                {/* Sparkle effects */}\n                <div className=\"absolute top-2 left-1/2 transform -translate-x-1/2 text-yellow-400 animate-ping\">✨</div>\n                <div className=\"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-yellow-400 animate-ping delay-300\">✨</div>\n              </div>\n              \n              {/* Enhanced visual feedback */}\n              <div className=\"mt-4 text-center\">\n                <div className=\"flex justify-center space-x-2\">\n                  <div className=\"w-2 h-2 bg-purple-400 rounded-full animate-pulse\"></div>\n                  <div className=\"w-2 h-2 bg-pink-400 rounded-full animate-pulse delay-100\"></div>\n                  <div className=\"w-2 h-2 bg-purple-400 rounded-full animate-pulse delay-200\"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Final Reveal Modal - CS:GO Style */}\n      {showFinalReveal && revealedPet && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50\">\n          <div className=\"relative\">\n            {/* Background effects */}\n            <div className=\"absolute inset-0 bg-gradient-to-r from-purple-600/20 to-pink-600/20 animate-pulse\"></div>\n            \n            {/* Main reveal card */}\n            <div className={`relative bg-gradient-to-br from-gray-900 to-gray-800 rounded-3xl p-12 max-w-lg mx-4 border-4 ${getRarityGlow(revealedPet.rarity)} shadow-2xl animate-bounce`}>\n              {/* Rarity glow effect */}\n              <div className={`absolute inset-0 rounded-3xl ${getRarityGlow(revealedPet.rarity)} opacity-50 blur-xl`}></div>\n              \n              <div className=\"relative z-10 text-center\">\n                {/* Pet image with effects */}\n                <div className=\"relative mb-6\">\n                  <div className=\"text-8xl mb-4 animate-pulse\">\n                    {revealedPet.image}\n                  </div>\n                  {/* Sparkle effects */}\n                  <div className=\"absolute top-0 left-1/4 text-2xl animate-ping\">✨</div>\n                  <div className=\"absolute top-1/4 right-1/4 text-2xl animate-ping delay-100\">✨</div>\n                  <div className=\"absolute bottom-1/4 left-1/3 text-2xl animate-ping delay-200\">✨</div>\n                </div>\n                \n                {/* Congratulations text */}\n                <h2 className=\"text-4xl font-bold text-white mb-4 bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent\">\n                  🎉 CONGRATULATIONS!\n                </h2>\n                \n                {/* Pet name */}\n                <p className=\"text-2xl text-white mb-4\">\n                  You got: <span className={`font-bold ${getRarityColor(revealedPet.rarity)}`}>{revealedPet.name}</span>\n                </p>\n                \n                {/* Rarity badge */}\n                <div className={`inline-block px-6 py-3 rounded-full text-lg font-bold ${getRarityBg(revealedPet.rarity)} ${getRarityColor(revealedPet.rarity)} border-2 border-white shadow-lg`}>\n                  {getRarityIcon(revealedPet.rarity)} {revealedPet.rarity}\n                </div>\n                \n                {/* Description */}\n                <p className=\"text-gray-300 mt-4 text-sm\">\n                  {revealedPet.description}\n                </p>\n                \n                {/* Probability */}\n                <p className=\"text-purple-300 mt-2 text-xs\">\n                  {(revealedPet.probability * 100).toFixed(1)}% chance to obtain\n                </p>\n              </div>\n            </div>\n            \n            {/* Floating particles */}\n            <div className=\"absolute inset-0 pointer-events-none\">\n              {[...Array(20)].map((_, i) => (\n                <div\n                  key={i}\n                  className=\"absolute w-2 h-2 bg-yellow-400 rounded-full animate-ping\"\n                  style={{\n                    left: `${Math.random() * 100}%`,\n                    top: `${Math.random() * 100}%`,\n                    animationDelay: `${Math.random() * 2}s`,\n                    animationDuration: `${1 + Math.random()}s`\n                  }}\n                ></div>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-8\">\n          <div className=\"flex items-center space-x-4\">\n            <button\n              onClick={() => navigate('/')}\n              className=\"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors\"\n            >\n              <ArrowLeft size={20} />\n              <span>Back to Home</span>\n            </button>\n          </div>\n          <h1 className=\"text-3xl font-bold text-gray-900 flex items-center\">\n            <Package size={32} className=\"mr-3 text-purple-600\" />\n            My Bag\n          </h1>\n        </div>\n\n        {/* Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8\">\n          <div className=\"bg-white rounded-lg shadow-md p-4 text-center\">\n            <div className=\"text-2xl font-bold text-purple-600\">{unopenedBoxes.length}</div>\n            <div className=\"text-gray-600\">Unopened Boxes</div>\n          </div>\n          <div className=\"bg-white rounded-lg shadow-md p-4 text-center\">\n            <div className=\"text-2xl font-bold text-green-600\">{openedBoxes.length}</div>\n            <div className=\"text-gray-600\">Opened Boxes</div>\n          </div>\n          <div className=\"bg-white rounded-lg shadow-md p-4 text-center\">\n            <div className=\"text-2xl font-bold text-blue-600\">{allPets.length}</div>\n            <div className=\"text-gray-600\">Total Pets</div>\n          </div>\n          <div className=\"bg-white rounded-lg shadow-md p-4 text-center\">\n            <div className=\"text-2xl font-bold text-yellow-600\">\n              {allPets.filter(pet => ['Rare', 'Legendary', 'Mythical', 'Divine', 'Prismatic'].includes(pet.rarity)).length}\n            </div>\n            <div className=\"text-gray-600\">Rare Pets</div>\n          </div>\n        </div>\n\n        {/* Unopened Boxes */}\n        {unopenedBoxes.length > 0 && (\n          <div className=\"mb-8\">\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-6 flex items-center\">\n              <Gift size={28} className=\"mr-3 text-purple-600\" />\n              Unopened Pet Boxes\n            </h2>\n            \n            {/* Debug Animation Test */}\n            <div className=\"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n              <h3 className=\"text-sm font-semibold text-yellow-800 mb-2\">Debug Animation Test</h3>\n              <div className=\"flex gap-2 flex-wrap\">\n                <button\n                  onClick={() => {\n                    console.log('Testing animation state...');\n                    setIsSpinning(true);\n                    setSpinningPets(generateRandomPetsForSpinning());\n                    setScrollProgress(0);\n                  }}\n                  className=\"px-3 py-1 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600\"\n                >\n                  Test Animation\n                </button>\n                <button\n                  onClick={() => {\n                    console.log('Stopping animation...');\n                    setIsSpinning(false);\n                    setSpinningPets([]);\n                  }}\n                  className=\"px-3 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600\"\n                >\n                  Stop Animation\n                </button>\n                <button\n                  onClick={() => {\n                    const container = scrollRef.current;\n                    if (container) {\n                      console.log('Manual scroll test');\n                      console.log('Before scroll - scrollLeft:', container.scrollLeft);\n                      container.scrollLeft = 500;\n                      console.log('After scroll - scrollLeft:', container.scrollLeft);\n                    }\n                  }}\n                  className=\"px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600\"\n                >\n                  Test Scroll\n                </button>\n                <span className=\"text-xs text-yellow-700\">\n                  isSpinning: {isSpinning.toString()} | Pets: {spinningPets.length}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n              {unopenedBoxes.map((box) => (\n                <div key={box.id} className=\"bg-white rounded-lg shadow-lg p-6 border-2 border-purple-200 hover:border-purple-400 transition-colors\">\n                  <div className=\"text-center\">\n                    <div className=\"text-4xl mb-4\">🎁</div>\n                    <h3 className=\"font-semibold text-gray-900 mb-2\">{box.productName}</h3>\n                    <p className=\"text-sm text-gray-600 mb-4\">\n                      Purchased: {new Date(box.purchaseDate).toLocaleDateString()}\n                    </p>\n                    <button\n                      onClick={() => handleOpenBox(box)}\n                      disabled={openingBox === box.id || isSpinning}\n                      className=\"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:from-purple-400 disabled:to-pink-400 text-white py-3 rounded-lg font-semibold transition-all transform hover:scale-105 disabled:transform-none\"\n                    >\n                      {openingBox === box.id || isSpinning ? (\n                        <>\n                          <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mx-auto mb-2\"></div>\n                          Opening...\n                        </>\n                      ) : (\n                        <>\n                          <Sparkles size={20} className=\"inline mr-2\" />\n                          Open Box\n                        </>\n                      )}\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Pet Collection */}\n        {allPets.length > 0 && (\n          <div className=\"mb-8\">\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-6 flex items-center\">\n              <Users size={28} className=\"mr-3 text-green-600\" />\n              Pet Collection ({allPets.length})\n            </h2>\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n              {allPets.map((pet, index) => (\n                <div key={`${pet.id}-${index}`} className=\"bg-white rounded-lg shadow-md p-4 border-2 hover:shadow-lg transition-shadow\">\n                  <div className=\"text-center\">\n                    <div className=\"text-3xl mb-2\">{pet.image}</div>\n                    <h3 className={`font-semibold text-sm mb-1 ${getRarityColor(pet.rarity)}`}>\n                      {pet.name}\n                    </h3>\n                    <div className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${getRarityBg(pet.rarity)} ${getRarityColor(pet.rarity)}`}>\n                      {getRarityIcon(pet.rarity)} {pet.rarity}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Opened Boxes History */}\n        {openedBoxes.length > 0 && (\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-6 flex items-center\">\n              <Calendar size={28} className=\"mr-3 text-blue-600\" />\n              Opened Boxes History\n            </h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n              {openedBoxes.map((box) => (\n                <div key={box.id} className=\"bg-white rounded-lg shadow-md p-4 border-2 border-gray-200\">\n                  <div className=\"text-center\">\n                    <div className=\"text-3xl mb-2\">{box.pet?.image}</div>\n                    <h3 className=\"font-semibold text-gray-900 mb-1\">{box.productName}</h3>\n                    <p className=\"text-sm text-gray-600 mb-2\">\n                      Opened: {new Date(box.purchaseDate).toLocaleDateString()}\n                    </p>\n                    {box.pet && (\n                      <div className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${getRarityBg(box.pet.rarity)} ${getRarityColor(box.pet.rarity)}`}>\n                        {getRarityIcon(box.pet.rarity)} {box.pet.name}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Empty State */}\n        {unopenedBoxes.length === 0 && allPets.length === 0 && (\n          <div className=\"text-center py-12\">\n            <div className=\"text-6xl mb-4\">🎁</div>\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Your bag is empty</h2>\n            <p className=\"text-gray-600 mb-6\">Purchase some pet boxes to start your collection!</p>\n            <button\n              onClick={() => navigate('/products')}\n              className=\"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors\"\n            >\n              Browse Pet Boxes\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Bag; "],"mappings":"gHAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,KAAmB,OAAO,CAC1D,OAASC,MAAM,KAAQ,wBAAwB,CAC/C,OAASC,OAAO,KAAQ,yBAAyB,CACjD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OACEC,OAAO,CACPC,IAAI,CACJC,QAAQ,CACRC,SAAS,CACTC,KAAK,CACLC,QAAQ,KACH,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAGtB,KAAM,CAAAC,GAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAEC,UAAU,CAAEC,gBAAgB,CAAEC,cAAc,CAAEC,UAAU,CAAEC,YAAY,CAAEC,kBAAkB,CAAEC,OAAQ,CAAC,CAAGtB,MAAM,CAAC,CAAC,CACxH,KAAM,CAAEuB,IAAK,CAAC,CAAGtB,OAAO,CAAC,CAAC,CAC1B,KAAM,CAAAuB,QAAQ,CAAGtB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACuB,UAAU,CAAEC,aAAa,CAAC,CAAG5B,QAAQ,CAAgB,IAAI,CAAC,CACjE,KAAM,CAAC6B,aAAa,CAAEC,gBAAgB,CAAC,CAAG9B,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAAC+B,WAAW,CAAEC,cAAc,CAAC,CAAGhC,QAAQ,CAAa,IAAI,CAAC,CAEhE;AACA,KAAM,CAACiC,UAAU,CAAEC,aAAa,CAAC,CAAGlC,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACmC,YAAY,CAAEC,eAAe,CAAC,CAAGpC,QAAQ,CAAQ,EAAE,CAAC,CAC3D,KAAM,CAACqC,oBAAoB,CAAEC,uBAAuB,CAAC,CAAGtC,QAAQ,CAAC,CAAC,CAAC,CACnE,KAAM,CAACuC,eAAe,CAAEC,kBAAkB,CAAC,CAAGxC,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACyC,cAAc,CAAEC,iBAAiB,CAAC,CAAG1C,QAAQ,CAAC,CAAC,CAAC,CAEvD,KAAM,CAAA2C,SAAS,CAAG1C,MAAM,CAAiB,IAAI,CAAC,CAC9C,KAAM,CAAA2C,eAAe,CAAG3C,MAAM,CAAsB,IAAI,CAAC,CAEzD;AACA,KAAM,CAAA4C,eAAe,CAAGA,CAAA,GAAM,CAC5B,GAAI,CACF,GAAI,CAACD,eAAe,CAACE,OAAO,CAAE,CAC5BF,eAAe,CAACE,OAAO,CAAG,IAAKC,MAAM,CAACC,YAAY,EAAKD,MAAM,CAASE,kBAAkB,EAAE,CAAC,CAC7F,CAEA,KAAM,CAAAC,UAAU,CAAGN,eAAe,CAACE,OAAO,CAACK,gBAAgB,CAAC,CAAC,CAC7D,KAAM,CAAAC,QAAQ,CAAGR,eAAe,CAACE,OAAO,CAACO,UAAU,CAAC,CAAC,CAErDH,UAAU,CAACI,OAAO,CAACF,QAAQ,CAAC,CAC5BA,QAAQ,CAACE,OAAO,CAACV,eAAe,CAACE,OAAO,CAACS,WAAW,CAAC,CAErDL,UAAU,CAACM,SAAS,CAACC,cAAc,CAAC,GAAG,CAAEb,eAAe,CAACE,OAAO,CAACY,WAAW,CAAC,CAC7ER,UAAU,CAACM,SAAS,CAACG,4BAA4B,CAAC,GAAG,CAAEf,eAAe,CAACE,OAAO,CAACY,WAAW,CAAG,GAAG,CAAC,CAEjGN,QAAQ,CAACQ,IAAI,CAACH,cAAc,CAAC,GAAG,CAAEb,eAAe,CAACE,OAAO,CAACY,WAAW,CAAC,CACtEN,QAAQ,CAACQ,IAAI,CAACD,4BAA4B,CAAC,IAAI,CAAEf,eAAe,CAACE,OAAO,CAACY,WAAW,CAAG,GAAG,CAAC,CAE3FR,UAAU,CAACW,KAAK,CAACjB,eAAe,CAACE,OAAO,CAACY,WAAW,CAAC,CACrDR,UAAU,CAACY,IAAI,CAAClB,eAAe,CAACE,OAAO,CAACY,WAAW,CAAG,GAAG,CAAC,CAC5D,CAAE,MAAOK,KAAK,CAAE,CACdC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC,CACpC,CACF,CAAC,CAED,KAAM,CAAAC,eAAe,CAAGA,CAAA,GAAM,CAC5B,GAAI,CACF,GAAI,CAACtB,eAAe,CAACE,OAAO,CAAE,CAC5BF,eAAe,CAACE,OAAO,CAAG,IAAKC,MAAM,CAACC,YAAY,EAAKD,MAAM,CAASE,kBAAkB,EAAE,CAAC,CAC7F,CAEA,KAAM,CAAAC,UAAU,CAAGN,eAAe,CAACE,OAAO,CAACK,gBAAgB,CAAC,CAAC,CAC7D,KAAM,CAAAC,QAAQ,CAAGR,eAAe,CAACE,OAAO,CAACO,UAAU,CAAC,CAAC,CAErDH,UAAU,CAACI,OAAO,CAACF,QAAQ,CAAC,CAC5BA,QAAQ,CAACE,OAAO,CAACV,eAAe,CAACE,OAAO,CAACS,WAAW,CAAC,CAErD;AACAL,UAAU,CAACM,SAAS,CAACC,cAAc,CAAC,GAAG,CAAEb,eAAe,CAACE,OAAO,CAACY,WAAW,CAAC,CAC7ER,UAAU,CAACM,SAAS,CAACG,4BAA4B,CAAC,GAAG,CAAEf,eAAe,CAACE,OAAO,CAACY,WAAW,CAAG,GAAG,CAAC,CAEjGN,QAAQ,CAACQ,IAAI,CAACH,cAAc,CAAC,GAAG,CAAEb,eAAe,CAACE,OAAO,CAACY,WAAW,CAAC,CACtEN,QAAQ,CAACQ,IAAI,CAACD,4BAA4B,CAAC,IAAI,CAAEf,eAAe,CAACE,OAAO,CAACY,WAAW,CAAG,GAAG,CAAC,CAE3FR,UAAU,CAACW,KAAK,CAACjB,eAAe,CAACE,OAAO,CAACY,WAAW,CAAC,CACrDR,UAAU,CAACY,IAAI,CAAClB,eAAe,CAACE,OAAO,CAACY,WAAW,CAAG,GAAG,CAAC,CAC5D,CAAE,MAAOK,KAAK,CAAE,CACdC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC,CACpC,CACF,CAAC,CAED,KAAM,CAAAE,aAAa,CAAGhD,gBAAgB,CAAC,CAAC,CACxC,KAAM,CAAAiD,WAAW,CAAGhD,cAAc,CAAC,CAAC,CACpC,KAAM,CAAAiD,OAAO,CAAGhD,UAAU,CAAC,CAAC,CAE5B,KAAM,CAAAiD,aAAa,CAAG,KAAO,CAAAC,GAAW,EAAK,CAC3CP,OAAO,CAACC,GAAG,CAAC,cAAc,CAAEM,GAAG,CAACC,EAAE,CAAC,CACnC,GAAI7C,UAAU,CAAE,OAAQ;AAExB;AACAC,aAAa,CAAC2C,GAAG,CAACC,EAAE,CAAC,CACrBtC,aAAa,CAAC,IAAI,CAAC,CACnBJ,gBAAgB,CAAC,KAAK,CAAC,CACvBU,kBAAkB,CAAC,KAAK,CAAC,CACzBE,iBAAiB,CAAC,CAAC,CAAC,CAEpBsB,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAE,IAAI,CAAC,CAEtD,GAAI,CACFD,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC,CAC5C;AACA,KAAM,CAAAQ,SAAS,CAAGnD,YAAY,CAAC,CAAC,CAChC0C,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEQ,SAAS,CAACC,IAAI,CAAC,CACnD1C,cAAc,CAACyC,SAAS,CAAC,CAEzB;AACA,KAAM,CAAAE,UAAU,CAAGC,6BAA6B,CAAC,CAAC,CAClDZ,OAAO,CAACC,GAAG,CAAC,WAAW,CAAEU,UAAU,CAACE,MAAM,CAAE,oBAAoB,CAAC,CACjEzC,eAAe,CAACuC,UAAU,CAAC,CAE3B;AACA,KAAM,IAAI,CAAAG,OAAO,CAACC,OAAO,EAAIC,UAAU,CAACD,OAAO,CAAE,GAAG,CAAC,CAAC,CAEtD;AACAf,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC,CAC3C,KAAM,CAAAgB,oBAAoB,CAACN,UAAU,CAACE,MAAM,CAAC,CAC7Cb,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC,CAEnC;AACAD,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAEQ,SAAS,CAACC,IAAI,CAAC,CACxDnD,kBAAkB,CAACkD,SAAS,CAAEF,GAAG,CAACC,EAAE,CAAC,CAErC;AAEA;AACAtC,aAAa,CAAC,KAAK,CAAC,CACpBE,eAAe,CAAC,EAAE,CAAC,CAErB,CAAE,MAAO2B,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC1C7B,aAAa,CAAC,KAAK,CAAC,CACpBE,eAAe,CAAC,EAAE,CAAC,CACrB,CAAC,OAAS,CACRR,aAAa,CAAC,IAAI,CAAC,CACrB,CACF,CAAC,CAED,KAAM,CAAAgD,6BAA6B,CAAGA,CAAA,GAAa,CACjD;AACA,KAAM,CAAAM,IAAW,CAAG,EAAE,CACtB,KAAM,CAAAC,eAAe,CAAG,CACtB,CAAEX,EAAE,CAAE,GAAG,CAAEE,IAAI,CAAE,YAAY,CAAEU,MAAM,CAAE,QAAQ,CAAEC,KAAK,CAAE,IAAI,CAAEC,WAAW,CAAE,GAAG,CAAEC,WAAW,CAAE,uBAAwB,CAAC,CACtH,CAAEf,EAAE,CAAE,GAAG,CAAEE,IAAI,CAAE,YAAY,CAAEU,MAAM,CAAE,QAAQ,CAAEC,KAAK,CAAE,IAAI,CAAEC,WAAW,CAAE,GAAG,CAAEC,WAAW,CAAE,oBAAqB,CAAC,CACnH,CAAEf,EAAE,CAAE,GAAG,CAAEE,IAAI,CAAE,cAAc,CAAEU,MAAM,CAAE,UAAU,CAAEC,KAAK,CAAE,IAAI,CAAEC,WAAW,CAAE,IAAI,CAAEC,WAAW,CAAE,uBAAwB,CAAC,CAC3H,CAAEf,EAAE,CAAE,GAAG,CAAEE,IAAI,CAAE,iBAAiB,CAAEU,MAAM,CAAE,UAAU,CAAEC,KAAK,CAAE,IAAI,CAAEC,WAAW,CAAE,IAAI,CAAEC,WAAW,CAAE,yBAA0B,CAAC,CAChI,CAAEf,EAAE,CAAE,GAAG,CAAEE,IAAI,CAAE,aAAa,CAAEU,MAAM,CAAE,MAAM,CAAEC,KAAK,CAAE,IAAI,CAAEC,WAAW,CAAE,GAAG,CAAEC,WAAW,CAAE,wBAAyB,CAAC,CACtH,CAAEf,EAAE,CAAE,GAAG,CAAEE,IAAI,CAAE,cAAc,CAAEU,MAAM,CAAE,MAAM,CAAEC,KAAK,CAAE,IAAI,CAAEC,WAAW,CAAE,GAAG,CAAEC,WAAW,CAAE,yBAA0B,CAAC,CACxH,CAAEf,EAAE,CAAE,GAAG,CAAEE,IAAI,CAAE,qBAAqB,CAAEU,MAAM,CAAE,WAAW,CAAEC,KAAK,CAAE,IAAI,CAAEC,WAAW,CAAE,GAAG,CAAEC,WAAW,CAAE,+BAAgC,CAAC,CAC1I,CAAEf,EAAE,CAAE,GAAG,CAAEE,IAAI,CAAE,oBAAoB,CAAEU,MAAM,CAAE,UAAU,CAAEC,KAAK,CAAE,GAAG,CAAEC,WAAW,CAAE,IAAI,CAAEC,WAAW,CAAE,mCAAoC,CAAC,CAC5I,CAAEf,EAAE,CAAE,GAAG,CAAEE,IAAI,CAAE,iBAAiB,CAAEU,MAAM,CAAE,QAAQ,CAAEC,KAAK,CAAE,IAAI,CAAEC,WAAW,CAAE,KAAK,CAAEC,WAAW,CAAE,0BAA2B,CAAC,CAChI,CAAEf,EAAE,CAAE,IAAI,CAAEE,IAAI,CAAE,mBAAmB,CAAEU,MAAM,CAAE,WAAW,CAAEC,KAAK,CAAE,IAAI,CAAEC,WAAW,CAAE,KAAK,CAAEC,WAAW,CAAE,iCAAkC,CAAC,CAC9I,CAED,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAG,EAAE,CAAEA,CAAC,EAAE,CAAE,CAC3B,KAAM,CAAAf,SAAS,CAAGU,eAAe,CAACM,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,CAAGR,eAAe,CAACN,MAAM,CAAC,CAAC,CACrFK,IAAI,CAACU,IAAI,CAAAC,aAAA,CAAAA,aAAA,IACJpB,SAAS,MACZD,EAAE,IAAAsB,MAAA,CAAKrB,SAAS,CAACD,EAAE,MAAAsB,MAAA,CAAIN,CAAC,CAAE,CAC1BJ,MAAM,CAAEW,eAAe,CAACtB,SAAS,CAACW,MAAM,CAAC,EAC1C,CAAC,CACJ,CACA,MAAO,CAAAF,IAAI,CACb,CAAC,CAED;AACA,KAAM,CAAAD,oBAAoB,CAAG,KAAO,CAAAe,OAAe,EAAoB,CACrEhC,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAE+B,OAAO,CAAE,MAAM,CAAC,CAChE,MAAO,IAAI,CAAAlB,OAAO,CAAEC,OAAO,EAAK,CAC9B,KAAM,CAAAkB,SAAS,CAAGtD,SAAS,CAACG,OAAO,CACnC,GAAI,CAACmD,SAAS,CAAE,CACdjC,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC,CACxD,MAAO,CAAAc,OAAO,CAAC,CAAC,CAClB,CAEA;AACAC,UAAU,CAAC,IAAM,CACf,KAAM,CAAAkB,SAAS,CAAG,EAAE,CAAE;AACtB,KAAM,CAAAC,YAAY,CAAG,CAAC,CAAE;AACxB,KAAM,CAAAC,WAAW,CAAGX,IAAI,CAACY,GAAG,CAAC,CAAC,CAAE,CAACL,OAAO,CAAGG,YAAY,EAAID,SAAS,CAAC,CACrE,KAAM,CAAAI,QAAQ,CAAG,IAAI,CAAE;AACvB,KAAM,CAAAC,SAAS,CAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAC5B,GAAI,CAAAC,aAAa,CAAG,CAAC,CAErB1C,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAE,CAAEiC,SAAS,CAAEC,YAAY,CAAEC,WAAW,CAAEE,QAAS,CAAC,CAAC,CACxFtC,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEgC,SAAS,CAACU,WAAW,CAAC,CAC5D3C,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEgC,SAAS,CAACW,WAAW,CAAC,CAC5D5C,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAEgC,SAAS,CAACY,UAAU,CAAC,CAE1D;AACAZ,SAAS,CAACY,UAAU,CAAG,CAAC,CAExB,QAAS,CAAAC,OAAOA,CAAA,CAAG,CACjB,GAAI,CAACb,SAAS,CAAE,MAAO,CAAAlB,OAAO,CAAC,CAAC,CAEhC,KAAM,CAAAgC,OAAO,CAAGP,IAAI,CAACC,GAAG,CAAC,CAAC,CAAGF,SAAS,CACtC,KAAM,CAAAS,QAAQ,CAAGvB,IAAI,CAACwB,GAAG,CAACF,OAAO,CAAGT,QAAQ,CAAE,CAAC,CAAC,CAEhD;AACA5D,iBAAiB,CAACsE,QAAQ,CAAC,CAE3B;AACA,KAAM,CAAAE,IAAI,CAAG,CAAC,CAAGzB,IAAI,CAAC0B,GAAG,CAAC,CAAC,CAAGH,QAAQ,CAAE,CAAC,CAAC,CAC1C,KAAM,CAAAI,aAAa,CAAGhB,WAAW,CAAGc,IAAI,CAExClD,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAE,CAC9B+C,QAAQ,CAAEA,QAAQ,CAACK,OAAO,CAAC,CAAC,CAAC,CAC7BH,IAAI,CAAEA,IAAI,CAACG,OAAO,CAAC,CAAC,CAAC,CACrBD,aAAa,CAAE3B,IAAI,CAAC6B,KAAK,CAACF,aAAa,CAAC,CACxCP,UAAU,CAAEpB,IAAI,CAAC6B,KAAK,CAACrB,SAAS,CAACY,UAAU,CAAC,CAC5CT,WACF,CAAC,CAAC,CAEF;AACAH,SAAS,CAACY,UAAU,CAAGO,aAAa,CAEpC;AACA,GAAIL,OAAO,CAAGL,aAAa,CAAG,GAAG,CAAE,CACjC7D,eAAe,CAAC,CAAC,CACjB6D,aAAa,CAAGK,OAAO,CACzB,CAEA,GAAIC,QAAQ,CAAG,CAAC,CAAE,CAChBO,qBAAqB,CAACT,OAAO,CAAC,CAChC,CAAC,IAAM,CACL;AACAb,SAAS,CAACY,UAAU,CAAGT,WAAW,CAClC1D,iBAAiB,CAAC,CAAC,CAAC,CAEpB;AACAsC,UAAU,CAAC,IAAM,CACfd,eAAe,CAAC,CAAC,CACnB,CAAC,CAAE,GAAG,CAAC,CAEPF,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAEgC,SAAS,CAACY,UAAU,CAAC,CAC3E9B,OAAO,CAAC,CAAC,CACX,CACF,CAEAf,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC,CACtC6C,OAAO,CAAC,CAAC,CACX,CAAC,CAAE,GAAG,CAAC,CAAE;AACX,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAU,cAAc,CAAIpC,MAAc,EAAK,CACzC,OAAQA,MAAM,EACZ,IAAK,QAAQ,CAAE,MAAO,eAAe,CACrC,IAAK,UAAU,CAAE,MAAO,eAAe,CACvC,IAAK,MAAM,CAAE,MAAO,iBAAiB,CACrC,IAAK,WAAW,CAAE,MAAO,iBAAiB,CAC1C,IAAK,UAAU,CAAE,MAAO,iBAAiB,CACzC,IAAK,QAAQ,CAAE,MAAO,eAAe,CACrC,IAAK,WAAW,CAAE,MAAO,cAAc,CACvC,QAAS,MAAO,eAAe,CACjC,CACF,CAAC,CAED,KAAM,CAAAqC,WAAW,CAAIrC,MAAc,EAAK,CACtC,OAAQA,MAAM,EACZ,IAAK,QAAQ,CAAE,MAAO,aAAa,CACnC,IAAK,UAAU,CAAE,MAAO,aAAa,CACrC,IAAK,MAAM,CAAE,MAAO,eAAe,CACnC,IAAK,WAAW,CAAE,MAAO,eAAe,CACxC,IAAK,UAAU,CAAE,MAAO,eAAe,CACvC,IAAK,QAAQ,CAAE,MAAO,aAAa,CACnC,IAAK,WAAW,CAAE,MAAO,4DAA4D,CACrF,QAAS,MAAO,aAAa,CAC/B,CACF,CAAC,CAED,KAAM,CAAAsC,aAAa,CAAItC,MAAc,EAAK,CACxC,OAAQA,MAAM,EACZ,IAAK,QAAQ,CAAE,MAAO,iBAAiB,CACvC,IAAK,UAAU,CAAE,MAAO,iBAAiB,CACzC,IAAK,MAAM,CAAE,MAAO,mBAAmB,CACvC,IAAK,WAAW,CAAE,MAAO,mBAAmB,CAC5C,IAAK,UAAU,CAAE,MAAO,mBAAmB,CAC3C,IAAK,QAAQ,CAAE,MAAO,iBAAiB,CACvC,IAAK,WAAW,CAAE,MAAO,gBAAgB,CACzC,QAAS,MAAO,iBAAiB,CACnC,CACF,CAAC,CAED,KAAM,CAAAuC,aAAa,CAAIvC,MAAc,EAAK,CACxC,OAAQA,MAAM,EACZ,IAAK,QAAQ,CAAE,MAAO,GAAG,CACzB,IAAK,UAAU,CAAE,MAAO,IAAI,CAC5B,IAAK,MAAM,CAAE,MAAO,IAAI,CACxB,IAAK,WAAW,CAAE,MAAO,GAAG,CAC5B,IAAK,UAAU,CAAE,MAAO,IAAI,CAC5B,IAAK,QAAQ,CAAE,MAAO,IAAI,CAC1B,IAAK,WAAW,CAAE,MAAO,IAAI,CAC7B,QAAS,MAAO,GAAG,CACrB,CACF,CAAC,CAED;AACA,KAAM,CAAAW,eAAe,CAAIX,MAAc,EAAoB,CACzD,OAAQA,MAAM,EACZ,IAAK,QAAQ,CACb,IAAK,UAAU,CACf,IAAK,MAAM,CACX,IAAK,WAAW,CAChB,IAAK,UAAU,CACf,IAAK,QAAQ,CACb,IAAK,WAAW,CACd,MAAO,CAAAA,MAAM,CACf,QACE,MAAO,SAAS,CACpB,CACF,CAAC,CAED,GAAI,CAAC3D,IAAI,CAAE,CACT,mBACEb,IAAA,QAAKgH,SAAS,CAAC,0DAA0D,CAAAC,QAAA,cACvE/G,KAAA,QAAK8G,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjH,IAAA,QAAKgH,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,cAAE,CAAK,CAAC,cACvCjH,IAAA,OAAIgH,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cACzEjH,IAAA,MAAGgH,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,+BAA6B,CAAG,CAAC,cACnEjH,IAAA,WACEkH,OAAO,CAAEA,CAAA,GAAMpG,QAAQ,CAAC,QAAQ,CAAE,CAClCkG,SAAS,CAAC,mGAAmG,CAAAC,QAAA,CAC9G,WAED,CAAQ,CAAC,EACN,CAAC,CACH,CAAC,CAEV,CAEA,mBACE/G,KAAA,QAAK8G,SAAS,CAAC,0DAA0D,CAAAC,QAAA,eAEvEjH,IAAA,QAAKgH,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cAC1CjH,IAAA,QAAKgH,SAAS,CAAC,6CAA6C,CAAAC,QAAA,cAC1D/G,KAAA,QAAK8G,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjH,IAAA,OAAIgH,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,kCAAsB,CAAI,CAAC,cACjFjH,IAAA,MAAGgH,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,kEAAgE,CAAG,CAAC,cAGtG/G,KAAA,QAAK8G,SAAS,CAAC,6CAA6C,CAAAC,QAAA,eAC1D/G,KAAA,QAAK8G,SAAS,CAAC,wEAAwE,CAAAC,QAAA,eACrFjH,IAAA,CAACL,QAAQ,EAACwH,IAAI,CAAE,EAAG,CAACH,SAAS,CAAC,MAAM,CAAE,CAAC,sBAEzC,EAAK,CAAC,cACN9G,KAAA,QAAK8G,SAAS,CAAC,oEAAoE,CAAAC,QAAA,eACjFjH,IAAA,CAACN,IAAI,EAACyH,IAAI,CAAE,EAAG,CAACH,SAAS,CAAC,MAAM,CAAE,CAAC,uBAErC,EAAK,CAAC,cACN9G,KAAA,QAAK8G,SAAS,CAAC,oEAAoE,CAAAC,QAAA,eACjFjH,IAAA,CAACP,OAAO,EAAC0H,IAAI,CAAE,EAAG,CAACH,SAAS,CAAC,MAAM,CAAE,CAAC,qBAExC,EAAK,CAAC,EACH,CAAC,EACH,CAAC,CACH,CAAC,CACH,CAAC,CAGL3F,UAAU,eACTrB,IAAA,QAAKgH,SAAS,CAAC,4EAA4E,CAAAC,QAAA,cACzFjH,IAAA,QAAKgH,SAAS,CAAC,gCAAgC,CAAAC,QAAA,cAC7C/G,KAAA,QAAK8G,SAAS,CAAC,kGAAkG,CAAAC,QAAA,eAC/G/G,KAAA,QAAK8G,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BjH,IAAA,OAAIgH,SAAS,CAAC,oCAAoC,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,cACvEjH,IAAA,MAAGgH,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,2BAAyB,CAAG,CAAC,cAG5D/G,KAAA,QAAK8G,SAAS,CAAC,8BAA8B,CAAAC,QAAA,EAAC,eAC/B,CAAC1F,YAAY,CAAC0C,MAAM,CAAC,eAAa,CAACY,IAAI,CAAC6B,KAAK,CAAC7E,cAAc,CAAG,GAAG,CAAC,CAAC,GACnF,EAAK,CAAC,cAGN7B,IAAA,QAAKgH,SAAS,CAAC,0CAA0C,CAAAC,QAAA,cACvDjH,IAAA,QACEgH,SAAS,CAAC,oGAAoG,CAC9GI,KAAK,CAAE,CAAEC,KAAK,IAAAnC,MAAA,CAAKrD,cAAc,CAAG,GAAG,KAAI,CAAE,CACzC,CAAC,CACJ,CAAC,cAGN3B,KAAA,MAAG8G,SAAS,CAAC,8BAA8B,CAAAC,QAAA,EACxCpC,IAAI,CAAC6B,KAAK,CAAC7E,cAAc,CAAG,GAAG,CAAC,CAAC,YACpC,EAAG,CAAC,EACD,CAAC,cAGN3B,KAAA,QAAK8G,SAAS,CAAC,uDAAuD,CAAAC,QAAA,eACpEjH,IAAA,QACEsH,GAAG,CAAEvF,SAAU,CACfiF,SAAS,CAAC,kEAAkE,CAC5EI,KAAK,CAAE,CACLG,cAAc,CAAE,MAAM,CACtBF,KAAK,CAAE,MAAM,CACbG,QAAQ,CAAE,QAAS;AACrB,CAAE,CAAAP,QAAA,CAED1F,YAAY,CAAC0C,MAAM,CAAG,CAAC,CACtB1C,YAAY,CAACkG,GAAG,CAAC,CAACC,GAAG,CAAEC,GAAG,gBACxBzH,KAAA,QAEE8G,SAAS,oGAAA9B,MAAA,CAAqG2B,WAAW,CAACa,GAAG,CAAClD,MAAM,CAAC,MAAAU,MAAA,CAAI4B,aAAa,CAACY,GAAG,CAAClD,MAAM,CAAC,8DAA6D,CAAAyC,QAAA,eAE/NjH,IAAA,QAAKgH,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAES,GAAG,CAACjD,KAAK,EAAI,GAAG,CAAM,CAAC,cACrEzE,IAAA,QAAKgH,SAAS,sBAAA9B,MAAA,CAAuB0B,cAAc,CAACc,GAAG,CAAClD,MAAM,CAAC,CAAG,CAAAyC,QAAA,CAAES,GAAG,CAAC5D,IAAI,CAAM,CAAC,cACnF5D,KAAA,QAAK8G,SAAS,CAAC,SAAS,CAAAC,QAAA,EAAEF,aAAa,CAACW,GAAG,CAAClD,MAAM,CAAC,CAAC,GAAC,CAACkD,GAAG,CAAClD,MAAM,EAAM,CAAC,GALlEkD,GAAG,CAAC9D,EAAE,CAAG+D,GAMX,CACN,CAAC,cAEF;AACA3H,IAAA,QAAKgH,SAAS,CAAC,gDAAgD,CAAAC,QAAA,cAC7DjH,IAAA,QAAKgH,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,iBAAe,CAAK,CAAC,CACtD,CACN,CACE,CAAC,cAGNjH,IAAA,QAAKgH,SAAS,CAAC,0GAA0G,CAAM,CAAC,cAGhIhH,IAAA,QAAKgH,SAAS,CAAC,uIAAuI,CAAM,CAAC,cAG7JhH,IAAA,QAAKgH,SAAS,CAAC,iFAAiF,CAAAC,QAAA,CAAC,QAAC,CAAK,CAAC,cACxGjH,IAAA,QAAKgH,SAAS,CAAC,8FAA8F,CAAAC,QAAA,CAAC,QAAC,CAAK,CAAC,EAClH,CAAC,cAGNjH,IAAA,QAAKgH,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAC/B/G,KAAA,QAAK8G,SAAS,CAAC,+BAA+B,CAAAC,QAAA,eAC5CjH,IAAA,QAAKgH,SAAS,CAAC,kDAAkD,CAAM,CAAC,cACxEhH,IAAA,QAAKgH,SAAS,CAAC,0DAA0D,CAAM,CAAC,cAChFhH,IAAA,QAAKgH,SAAS,CAAC,4DAA4D,CAAM,CAAC,EAC/E,CAAC,CACH,CAAC,EACH,CAAC,CACH,CAAC,CACH,CACN,CAGArF,eAAe,EAAIR,WAAW,eAC7BnB,IAAA,QAAKgH,SAAS,CAAC,4EAA4E,CAAAC,QAAA,cACzF/G,KAAA,QAAK8G,SAAS,CAAC,UAAU,CAAAC,QAAA,eAEvBjH,IAAA,QAAKgH,SAAS,CAAC,mFAAmF,CAAM,CAAC,cAGzG9G,KAAA,QAAK8G,SAAS,iGAAA9B,MAAA,CAAkG4B,aAAa,CAAC3F,WAAW,CAACqD,MAAM,CAAC,8BAA6B,CAAAyC,QAAA,eAE5KjH,IAAA,QAAKgH,SAAS,iCAAA9B,MAAA,CAAkC4B,aAAa,CAAC3F,WAAW,CAACqD,MAAM,CAAC,uBAAsB,CAAM,CAAC,cAE9GtE,KAAA,QAAK8G,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eAExC/G,KAAA,QAAK8G,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BjH,IAAA,QAAKgH,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CACzC9F,WAAW,CAACsD,KAAK,CACf,CAAC,cAENzE,IAAA,QAAKgH,SAAS,CAAC,+CAA+C,CAAAC,QAAA,CAAC,QAAC,CAAK,CAAC,cACtEjH,IAAA,QAAKgH,SAAS,CAAC,4DAA4D,CAAAC,QAAA,CAAC,QAAC,CAAK,CAAC,cACnFjH,IAAA,QAAKgH,SAAS,CAAC,8DAA8D,CAAAC,QAAA,CAAC,QAAC,CAAK,CAAC,EAClF,CAAC,cAGNjH,IAAA,OAAIgH,SAAS,CAAC,iHAAiH,CAAAC,QAAA,CAAC,+BAEhI,CAAI,CAAC,cAGL/G,KAAA,MAAG8G,SAAS,CAAC,0BAA0B,CAAAC,QAAA,EAAC,WAC7B,cAAAjH,IAAA,SAAMgH,SAAS,cAAA9B,MAAA,CAAe0B,cAAc,CAACzF,WAAW,CAACqD,MAAM,CAAC,CAAG,CAAAyC,QAAA,CAAE9F,WAAW,CAAC2C,IAAI,CAAO,CAAC,EACrG,CAAC,cAGJ5D,KAAA,QAAK8G,SAAS,0DAAA9B,MAAA,CAA2D2B,WAAW,CAAC1F,WAAW,CAACqD,MAAM,CAAC,MAAAU,MAAA,CAAI0B,cAAc,CAACzF,WAAW,CAACqD,MAAM,CAAC,oCAAmC,CAAAyC,QAAA,EAC9KF,aAAa,CAAC5F,WAAW,CAACqD,MAAM,CAAC,CAAC,GAAC,CAACrD,WAAW,CAACqD,MAAM,EACpD,CAAC,cAGNxE,IAAA,MAAGgH,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CACtC9F,WAAW,CAACwD,WAAW,CACvB,CAAC,cAGJzE,KAAA,MAAG8G,SAAS,CAAC,8BAA8B,CAAAC,QAAA,EACxC,CAAC9F,WAAW,CAACuD,WAAW,CAAG,GAAG,EAAE+B,OAAO,CAAC,CAAC,CAAC,CAAC,oBAC9C,EAAG,CAAC,EACD,CAAC,EACH,CAAC,cAGNzG,IAAA,QAAKgH,SAAS,CAAC,sCAAsC,CAAAC,QAAA,CAClD,CAAC,GAAGW,KAAK,CAAC,EAAE,CAAC,CAAC,CAACH,GAAG,CAAC,CAACI,CAAC,CAAEjD,CAAC,gBACvB5E,IAAA,QAEEgH,SAAS,CAAC,0DAA0D,CACpEI,KAAK,CAAE,CACLU,IAAI,IAAA5C,MAAA,CAAKL,IAAI,CAACE,MAAM,CAAC,CAAC,CAAG,GAAG,KAAG,CAC/BgD,GAAG,IAAA7C,MAAA,CAAKL,IAAI,CAACE,MAAM,CAAC,CAAC,CAAG,GAAG,KAAG,CAC9BiD,cAAc,IAAA9C,MAAA,CAAKL,IAAI,CAACE,MAAM,CAAC,CAAC,CAAG,CAAC,KAAG,CACvCkD,iBAAiB,IAAA/C,MAAA,CAAK,CAAC,CAAGL,IAAI,CAACE,MAAM,CAAC,CAAC,KACzC,CAAE,EAPGH,CAQD,CACP,CAAC,CACC,CAAC,EACH,CAAC,CACH,CACN,cAED1E,KAAA,QAAK8G,SAAS,CAAC,6CAA6C,CAAAC,QAAA,eAE1D/G,KAAA,QAAK8G,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDjH,IAAA,QAAKgH,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cAC1C/G,KAAA,WACEgH,OAAO,CAAEA,CAAA,GAAMpG,QAAQ,CAAC,GAAG,CAAE,CAC7BkG,SAAS,CAAC,iFAAiF,CAAAC,QAAA,eAE3FjH,IAAA,CAACJ,SAAS,EAACuH,IAAI,CAAE,EAAG,CAAE,CAAC,cACvBnH,IAAA,SAAAiH,QAAA,CAAM,cAAY,CAAM,CAAC,EACnB,CAAC,CACN,CAAC,cACN/G,KAAA,OAAI8G,SAAS,CAAC,oDAAoD,CAAAC,QAAA,eAChEjH,IAAA,CAACP,OAAO,EAAC0H,IAAI,CAAE,EAAG,CAACH,SAAS,CAAC,sBAAsB,CAAE,CAAC,SAExD,EAAI,CAAC,EACF,CAAC,cAGN9G,KAAA,QAAK8G,SAAS,CAAC,4CAA4C,CAAAC,QAAA,eACzD/G,KAAA,QAAK8G,SAAS,CAAC,+CAA+C,CAAAC,QAAA,eAC5DjH,IAAA,QAAKgH,SAAS,CAAC,oCAAoC,CAAAC,QAAA,CAAE1D,aAAa,CAACU,MAAM,CAAM,CAAC,cAChFjE,IAAA,QAAKgH,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,gBAAc,CAAK,CAAC,EAChD,CAAC,cACN/G,KAAA,QAAK8G,SAAS,CAAC,+CAA+C,CAAAC,QAAA,eAC5DjH,IAAA,QAAKgH,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAEzD,WAAW,CAACS,MAAM,CAAM,CAAC,cAC7EjE,IAAA,QAAKgH,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,cAAY,CAAK,CAAC,EAC9C,CAAC,cACN/G,KAAA,QAAK8G,SAAS,CAAC,+CAA+C,CAAAC,QAAA,eAC5DjH,IAAA,QAAKgH,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAExD,OAAO,CAACQ,MAAM,CAAM,CAAC,cACxEjE,IAAA,QAAKgH,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,YAAU,CAAK,CAAC,EAC5C,CAAC,cACN/G,KAAA,QAAK8G,SAAS,CAAC,+CAA+C,CAAAC,QAAA,eAC5DjH,IAAA,QAAKgH,SAAS,CAAC,oCAAoC,CAAAC,QAAA,CAChDxD,OAAO,CAACyE,MAAM,CAACR,GAAG,EAAI,CAAC,MAAM,CAAE,WAAW,CAAE,UAAU,CAAE,QAAQ,CAAE,WAAW,CAAC,CAACS,QAAQ,CAACT,GAAG,CAAClD,MAAM,CAAC,CAAC,CAACP,MAAM,CACzG,CAAC,cACNjE,IAAA,QAAKgH,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,WAAS,CAAK,CAAC,EAC3C,CAAC,EACH,CAAC,CAGL1D,aAAa,CAACU,MAAM,CAAG,CAAC,eACvB/D,KAAA,QAAK8G,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB/G,KAAA,OAAI8G,SAAS,CAAC,yDAAyD,CAAAC,QAAA,eACrEjH,IAAA,CAACN,IAAI,EAACyH,IAAI,CAAE,EAAG,CAACH,SAAS,CAAC,sBAAsB,CAAE,CAAC,qBAErD,EAAI,CAAC,cAGL9G,KAAA,QAAK8G,SAAS,CAAC,2DAA2D,CAAAC,QAAA,eACxEjH,IAAA,OAAIgH,SAAS,CAAC,4CAA4C,CAAAC,QAAA,CAAC,sBAAoB,CAAI,CAAC,cACpF/G,KAAA,QAAK8G,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCjH,IAAA,WACEkH,OAAO,CAAEA,CAAA,GAAM,CACb9D,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC,CACzC/B,aAAa,CAAC,IAAI,CAAC,CACnBE,eAAe,CAACwC,6BAA6B,CAAC,CAAC,CAAC,CAChDlC,iBAAiB,CAAC,CAAC,CAAC,CACtB,CAAE,CACFkF,SAAS,CAAC,wEAAwE,CAAAC,QAAA,CACnF,gBAED,CAAQ,CAAC,cACTjH,IAAA,WACEkH,OAAO,CAAEA,CAAA,GAAM,CACb9D,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC,CACpC/B,aAAa,CAAC,KAAK,CAAC,CACpBE,eAAe,CAAC,EAAE,CAAC,CACrB,CAAE,CACFwF,SAAS,CAAC,kEAAkE,CAAAC,QAAA,CAC7E,gBAED,CAAQ,CAAC,cACTjH,IAAA,WACEkH,OAAO,CAAEA,CAAA,GAAM,CACb,KAAM,CAAA7B,SAAS,CAAGtD,SAAS,CAACG,OAAO,CACnC,GAAImD,SAAS,CAAE,CACbjC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CACjCD,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAEgC,SAAS,CAACY,UAAU,CAAC,CAChEZ,SAAS,CAACY,UAAU,CAAG,GAAG,CAC1B7C,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAEgC,SAAS,CAACY,UAAU,CAAC,CACjE,CACF,CAAE,CACFe,SAAS,CAAC,oEAAoE,CAAAC,QAAA,CAC/E,aAED,CAAQ,CAAC,cACT/G,KAAA,SAAM8G,SAAS,CAAC,yBAAyB,CAAAC,QAAA,EAAC,cAC5B,CAAC5F,UAAU,CAAC+G,QAAQ,CAAC,CAAC,CAAC,WAAS,CAAC7G,YAAY,CAAC0C,MAAM,EAC5D,CAAC,EACJ,CAAC,EACH,CAAC,cAENjE,IAAA,QAAKgH,SAAS,CAAC,qEAAqE,CAAAC,QAAA,CACjF1D,aAAa,CAACkE,GAAG,CAAE9D,GAAG,eACrB3D,IAAA,QAAkBgH,SAAS,CAAC,wGAAwG,CAAAC,QAAA,cAClI/G,KAAA,QAAK8G,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjH,IAAA,QAAKgH,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,cAAE,CAAK,CAAC,cACvCjH,IAAA,OAAIgH,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAEtD,GAAG,CAAC0E,WAAW,CAAK,CAAC,cACvEnI,KAAA,MAAG8G,SAAS,CAAC,4BAA4B,CAAAC,QAAA,EAAC,aAC7B,CAAC,GAAI,CAAArB,IAAI,CAACjC,GAAG,CAAC2E,YAAY,CAAC,CAACC,kBAAkB,CAAC,CAAC,EAC1D,CAAC,cACJvI,IAAA,WACEkH,OAAO,CAAEA,CAAA,GAAMxD,aAAa,CAACC,GAAG,CAAE,CAClC6E,QAAQ,CAAEzH,UAAU,GAAK4C,GAAG,CAACC,EAAE,EAAIvC,UAAW,CAC9C2F,SAAS,CAAC,qPAAqP,CAAAC,QAAA,CAE9PlG,UAAU,GAAK4C,GAAG,CAACC,EAAE,EAAIvC,UAAU,cAClCnB,KAAA,CAAAE,SAAA,EAAA6G,QAAA,eACEjH,IAAA,QAAKgH,SAAS,CAAC,wEAAwE,CAAM,CAAC,aAEhG,EAAE,CAAC,cAEH9G,KAAA,CAAAE,SAAA,EAAA6G,QAAA,eACEjH,IAAA,CAACL,QAAQ,EAACwH,IAAI,CAAE,EAAG,CAACH,SAAS,CAAC,aAAa,CAAE,CAAC,WAEhD,EAAE,CACH,CACK,CAAC,EACN,CAAC,EAxBErD,GAAG,CAACC,EAyBT,CACN,CAAC,CACC,CAAC,EACH,CACN,CAGAH,OAAO,CAACQ,MAAM,CAAG,CAAC,eACjB/D,KAAA,QAAK8G,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB/G,KAAA,OAAI8G,SAAS,CAAC,yDAAyD,CAAAC,QAAA,eACrEjH,IAAA,CAACH,KAAK,EAACsH,IAAI,CAAE,EAAG,CAACH,SAAS,CAAC,qBAAqB,CAAE,CAAC,mBACnC,CAACvD,OAAO,CAACQ,MAAM,CAAC,GAClC,EAAI,CAAC,cACLjE,IAAA,QAAKgH,SAAS,CAAC,qEAAqE,CAAAC,QAAA,CACjFxD,OAAO,CAACgE,GAAG,CAAC,CAACC,GAAG,CAAEe,KAAK,gBACtBzI,IAAA,QAAgCgH,SAAS,CAAC,8EAA8E,CAAAC,QAAA,cACtH/G,KAAA,QAAK8G,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjH,IAAA,QAAKgH,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAES,GAAG,CAACjD,KAAK,CAAM,CAAC,cAChDzE,IAAA,OAAIgH,SAAS,+BAAA9B,MAAA,CAAgC0B,cAAc,CAACc,GAAG,CAAClD,MAAM,CAAC,CAAG,CAAAyC,QAAA,CACvES,GAAG,CAAC5D,IAAI,CACP,CAAC,cACL5D,KAAA,QAAK8G,SAAS,4DAAA9B,MAAA,CAA6D2B,WAAW,CAACa,GAAG,CAAClD,MAAM,CAAC,MAAAU,MAAA,CAAI0B,cAAc,CAACc,GAAG,CAAClD,MAAM,CAAC,CAAG,CAAAyC,QAAA,EAChIF,aAAa,CAACW,GAAG,CAAClD,MAAM,CAAC,CAAC,GAAC,CAACkD,GAAG,CAAClD,MAAM,EACpC,CAAC,EACH,CAAC,KAAAU,MAAA,CATKwC,GAAG,CAAC9D,EAAE,MAAAsB,MAAA,CAAIuD,KAAK,CAUvB,CACN,CAAC,CACC,CAAC,EACH,CACN,CAGAjF,WAAW,CAACS,MAAM,CAAG,CAAC,eACrB/D,KAAA,QAAA+G,QAAA,eACE/G,KAAA,OAAI8G,SAAS,CAAC,yDAAyD,CAAAC,QAAA,eACrEjH,IAAA,CAACF,QAAQ,EAACqH,IAAI,CAAE,EAAG,CAACH,SAAS,CAAC,oBAAoB,CAAE,CAAC,uBAEvD,EAAI,CAAC,cACLhH,IAAA,QAAKgH,SAAS,CAAC,qEAAqE,CAAAC,QAAA,CACjFzD,WAAW,CAACiE,GAAG,CAAE9D,GAAG,OAAA+E,QAAA,oBACnB1I,IAAA,QAAkBgH,SAAS,CAAC,4DAA4D,CAAAC,QAAA,cACtF/G,KAAA,QAAK8G,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjH,IAAA,QAAKgH,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAAyB,QAAA,CAAE/E,GAAG,CAAC+D,GAAG,UAAAgB,QAAA,iBAAPA,QAAA,CAASjE,KAAK,CAAM,CAAC,cACrDzE,IAAA,OAAIgH,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAEtD,GAAG,CAAC0E,WAAW,CAAK,CAAC,cACvEnI,KAAA,MAAG8G,SAAS,CAAC,4BAA4B,CAAAC,QAAA,EAAC,UAChC,CAAC,GAAI,CAAArB,IAAI,CAACjC,GAAG,CAAC2E,YAAY,CAAC,CAACC,kBAAkB,CAAC,CAAC,EACvD,CAAC,CACH5E,GAAG,CAAC+D,GAAG,eACNxH,KAAA,QAAK8G,SAAS,4DAAA9B,MAAA,CAA6D2B,WAAW,CAAClD,GAAG,CAAC+D,GAAG,CAAClD,MAAM,CAAC,MAAAU,MAAA,CAAI0B,cAAc,CAACjD,GAAG,CAAC+D,GAAG,CAAClD,MAAM,CAAC,CAAG,CAAAyC,QAAA,EACxIF,aAAa,CAACpD,GAAG,CAAC+D,GAAG,CAAClD,MAAM,CAAC,CAAC,GAAC,CAACb,GAAG,CAAC+D,GAAG,CAAC5D,IAAI,EAC1C,CACN,EACE,CAAC,EAZEH,GAAG,CAACC,EAaT,CAAC,EACP,CAAC,CACC,CAAC,EACH,CACN,CAGAL,aAAa,CAACU,MAAM,GAAK,CAAC,EAAIR,OAAO,CAACQ,MAAM,GAAK,CAAC,eACjD/D,KAAA,QAAK8G,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCjH,IAAA,QAAKgH,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,cAAE,CAAK,CAAC,cACvCjH,IAAA,OAAIgH,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,mBAAiB,CAAI,CAAC,cAC5EjH,IAAA,MAAGgH,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,mDAAiD,CAAG,CAAC,cACvFjH,IAAA,WACEkH,OAAO,CAAEA,CAAA,GAAMpG,QAAQ,CAAC,WAAW,CAAE,CACrCkG,SAAS,CAAC,mGAAmG,CAAAC,QAAA,CAC9G,kBAED,CAAQ,CAAC,EACN,CACN,EACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA5G,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}