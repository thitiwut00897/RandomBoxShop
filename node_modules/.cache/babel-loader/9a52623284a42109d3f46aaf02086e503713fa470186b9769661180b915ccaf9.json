{"ast":null,"code":"import _objectSpread from\"/Users/thitiwutphophan/shop/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext(undefined);export const useCart=()=>{const context=useContext(CartContext);if(context===undefined){throw new Error('useCart must be used within a CartProvider');}return context;};export const CartProvider=_ref=>{let{children}=_ref;const[items,setItems]=useState([]);useEffect(()=>{// Load cart from localStorage\nconst savedCart=localStorage.getItem('cart');if(savedCart){setItems(JSON.parse(savedCart));}},[]);useEffect(()=>{// Save cart to localStorage whenever it changes\nlocalStorage.setItem('cart',JSON.stringify(items));},[items]);const addToCart=function(product){let quantity=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;setItems(prevItems=>{const existingItem=prevItems.find(item=>item.product.id===product.id);if(existingItem){return prevItems.map(item=>item.product.id===product.id?_objectSpread(_objectSpread({},item),{},{quantity:item.quantity+quantity}):item);}else{return[...prevItems,{product,quantity}];}});};const removeFromCart=productId=>{setItems(prevItems=>prevItems.filter(item=>item.product.id!==productId));};const updateQuantity=(productId,quantity)=>{if(quantity<=0){removeFromCart(productId);return;}setItems(prevItems=>prevItems.map(item=>item.product.id===productId?_objectSpread(_objectSpread({},item),{},{quantity}):item));};const clearCart=()=>{setItems([]);};const getTotal=()=>{return items.reduce((total,item)=>total+item.product.price*item.quantity,0);};const getItemCount=()=>{return items.reduce((count,item)=>count+item.quantity,0);};const value={items,addToCart,removeFromCart,updateQuantity,clearCart,getTotal,getItemCount};return/*#__PURE__*/_jsx(CartContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsx","_jsx","CartContext","undefined","useCart","context","Error","CartProvider","_ref","children","items","setItems","savedCart","localStorage","getItem","JSON","parse","setItem","stringify","addToCart","product","quantity","arguments","length","prevItems","existingItem","find","item","id","map","_objectSpread","removeFromCart","productId","filter","updateQuantity","clearCart","getTotal","reduce","total","price","getItemCount","count","value","Provider"],"sources":["/Users/thitiwutphophan/shop/src/contexts/CartContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { CartItem, Product } from '../types';\n\ninterface CartContextType {\n  items: CartItem[];\n  addToCart: (product: Product, quantity?: number) => void;\n  removeFromCart: (productId: string) => void;\n  updateQuantity: (productId: string, quantity: number) => void;\n  clearCart: () => void;\n  getTotal: () => number;\n  getItemCount: () => number;\n}\n\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\nexport const useCart = () => {\n  const context = useContext(CartContext);\n  if (context === undefined) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n};\n\ninterface CartProviderProps {\n  children: ReactNode;\n}\n\nexport const CartProvider: React.FC<CartProviderProps> = ({ children }) => {\n  const [items, setItems] = useState<CartItem[]>([]);\n\n  useEffect(() => {\n    // Load cart from localStorage\n    const savedCart = localStorage.getItem('cart');\n    if (savedCart) {\n      setItems(JSON.parse(savedCart));\n    }\n  }, []);\n\n  useEffect(() => {\n    // Save cart to localStorage whenever it changes\n    localStorage.setItem('cart', JSON.stringify(items));\n  }, [items]);\n\n  const addToCart = (product: Product, quantity: number = 1) => {\n    setItems(prevItems => {\n      const existingItem = prevItems.find(item => item.product.id === product.id);\n      \n      if (existingItem) {\n        return prevItems.map(item =>\n          item.product.id === product.id\n            ? { ...item, quantity: item.quantity + quantity }\n            : item\n        );\n      } else {\n        return [...prevItems, { product, quantity }];\n      }\n    });\n  };\n\n  const removeFromCart = (productId: string) => {\n    setItems(prevItems => prevItems.filter(item => item.product.id !== productId));\n  };\n\n  const updateQuantity = (productId: string, quantity: number) => {\n    if (quantity <= 0) {\n      removeFromCart(productId);\n      return;\n    }\n    \n    setItems(prevItems =>\n      prevItems.map(item =>\n        item.product.id === productId\n          ? { ...item, quantity }\n          : item\n      )\n    );\n  };\n\n  const clearCart = () => {\n    setItems([]);\n  };\n\n  const getTotal = () => {\n    return items.reduce((total, item) => total + (item.product.price * item.quantity), 0);\n  };\n\n  const getItemCount = () => {\n    return items.reduce((count, item) => count + item.quantity, 0);\n  };\n\n  const value = {\n    items,\n    addToCart,\n    removeFromCart,\n    updateQuantity,\n    clearCart,\n    getTotal,\n    getItemCount,\n  };\n\n  return (\n    <CartContext.Provider value={value}>\n      {children}\n    </CartContext.Provider>\n  );\n}; "],"mappings":"gHAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAmB,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAazF,KAAM,CAAAC,WAAW,cAAGN,aAAa,CAA8BO,SAAS,CAAC,CAEzE,MAAO,MAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAAC,OAAO,CAAGR,UAAU,CAACK,WAAW,CAAC,CACvC,GAAIG,OAAO,GAAKF,SAAS,CAAE,CACzB,KAAM,IAAI,CAAAG,KAAK,CAAC,4CAA4C,CAAC,CAC/D,CACA,MAAO,CAAAD,OAAO,CAChB,CAAC,CAMD,MAAO,MAAM,CAAAE,YAAyC,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACpE,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAa,EAAE,CAAC,CAElDC,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAa,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC9C,GAAIF,SAAS,CAAE,CACbD,QAAQ,CAACI,IAAI,CAACC,KAAK,CAACJ,SAAS,CAAC,CAAC,CACjC,CACF,CAAC,CAAE,EAAE,CAAC,CAENb,SAAS,CAAC,IAAM,CACd;AACAc,YAAY,CAACI,OAAO,CAAC,MAAM,CAAEF,IAAI,CAACG,SAAS,CAACR,KAAK,CAAC,CAAC,CACrD,CAAC,CAAE,CAACA,KAAK,CAAC,CAAC,CAEX,KAAM,CAAAS,SAAS,CAAG,QAAAA,CAACC,OAAgB,CAA2B,IAAzB,CAAAC,QAAgB,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAnB,SAAA,CAAAmB,SAAA,IAAG,CAAC,CACvDX,QAAQ,CAACa,SAAS,EAAI,CACpB,KAAM,CAAAC,YAAY,CAAGD,SAAS,CAACE,IAAI,CAACC,IAAI,EAAIA,IAAI,CAACP,OAAO,CAACQ,EAAE,GAAKR,OAAO,CAACQ,EAAE,CAAC,CAE3E,GAAIH,YAAY,CAAE,CAChB,MAAO,CAAAD,SAAS,CAACK,GAAG,CAACF,IAAI,EACvBA,IAAI,CAACP,OAAO,CAACQ,EAAE,GAAKR,OAAO,CAACQ,EAAE,CAAAE,aAAA,CAAAA,aAAA,IACrBH,IAAI,MAAEN,QAAQ,CAAEM,IAAI,CAACN,QAAQ,CAAGA,QAAQ,GAC7CM,IACN,CAAC,CACH,CAAC,IAAM,CACL,MAAO,CAAC,GAAGH,SAAS,CAAE,CAAEJ,OAAO,CAAEC,QAAS,CAAC,CAAC,CAC9C,CACF,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAU,cAAc,CAAIC,SAAiB,EAAK,CAC5CrB,QAAQ,CAACa,SAAS,EAAIA,SAAS,CAACS,MAAM,CAACN,IAAI,EAAIA,IAAI,CAACP,OAAO,CAACQ,EAAE,GAAKI,SAAS,CAAC,CAAC,CAChF,CAAC,CAED,KAAM,CAAAE,cAAc,CAAGA,CAACF,SAAiB,CAAEX,QAAgB,GAAK,CAC9D,GAAIA,QAAQ,EAAI,CAAC,CAAE,CACjBU,cAAc,CAACC,SAAS,CAAC,CACzB,OACF,CAEArB,QAAQ,CAACa,SAAS,EAChBA,SAAS,CAACK,GAAG,CAACF,IAAI,EAChBA,IAAI,CAACP,OAAO,CAACQ,EAAE,GAAKI,SAAS,CAAAF,aAAA,CAAAA,aAAA,IACpBH,IAAI,MAAEN,QAAQ,GACnBM,IACN,CACF,CAAC,CACH,CAAC,CAED,KAAM,CAAAQ,SAAS,CAAGA,CAAA,GAAM,CACtBxB,QAAQ,CAAC,EAAE,CAAC,CACd,CAAC,CAED,KAAM,CAAAyB,QAAQ,CAAGA,CAAA,GAAM,CACrB,MAAO,CAAA1B,KAAK,CAAC2B,MAAM,CAAC,CAACC,KAAK,CAAEX,IAAI,GAAKW,KAAK,CAAIX,IAAI,CAACP,OAAO,CAACmB,KAAK,CAAGZ,IAAI,CAACN,QAAS,CAAE,CAAC,CAAC,CACvF,CAAC,CAED,KAAM,CAAAmB,YAAY,CAAGA,CAAA,GAAM,CACzB,MAAO,CAAA9B,KAAK,CAAC2B,MAAM,CAAC,CAACI,KAAK,CAAEd,IAAI,GAAKc,KAAK,CAAGd,IAAI,CAACN,QAAQ,CAAE,CAAC,CAAC,CAChE,CAAC,CAED,KAAM,CAAAqB,KAAK,CAAG,CACZhC,KAAK,CACLS,SAAS,CACTY,cAAc,CACdG,cAAc,CACdC,SAAS,CACTC,QAAQ,CACRI,YACF,CAAC,CAED,mBACEvC,IAAA,CAACC,WAAW,CAACyC,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAAjC,QAAA,CAChCA,QAAQ,CACW,CAAC,CAE3B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}